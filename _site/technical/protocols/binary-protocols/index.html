<!DOCTYPE html>
<html>

  
<head>
<title>Binary protocols - Cardano</title>
<meta charset="utf-8">



<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<meta name="twitter:card" content="Binary protocols">
<meta name="twitter:site" content="Cardano">
<meta name="twitter:creator" content="Cardano">

<meta name="twitter:title" content="Binary protocols">
<meta name="twitter:description" content="Binary protocols">

<meta property="og:title" content="Binary protocols" />
<meta property="og:type" content="page" />
<meta property="og:url" content="/technical/protocols/binary-protocols/" />


<meta property="og:description" content="SL Documentation" />
<meta property="og:site_name" content="Cardano" />





<meta name="twitter:image" content="//cardano-docs.iohk.io/img/sharing.jpg">



<meta property="og:image" content="//cardano-docs.iohk.io/img/sharing.jpg" />






<script>(function(){document.documentElement.className='js'})();</script>

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" type="text/css" media="all" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto%3A100%2C300%2C500&#038;subset=latin&#038;ver=4.4.2" type="text/css" media="all" />


<link href="/css/montserrat.css" rel="stylesheet">
<link href="/css/app.css" rel="stylesheet" media="screen">
<link href="/css/custom.0.14.css" rel="stylesheet" media="screen">

<!--[if lte IE 10]>
<script>webglIE = false;</script>
<style>#io_intro_nav {display: none !important}</style>
<![endif]-->
<!--[if lt IE 9]>
<link rel="stylesheet"  href="/css/ie.css" type="text/css" media="all" />
<script src="/js/html5.js"></script>
<![endif]-->
<!--[if lt IE 8]>
<script>lowerie = true;</script>
<link rel="stylesheet"  href="/css/ieoff.css" type="text/css" media="all" />
<![endif]-->

<script type="text/javascript" src="/js/app/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="/js/app/jquery-ui.js"></script>

</head>


  <body>

    <div class="top">

  <nav class="navbar navbar-default  navbar-inverse">
    <div class="container">


      <div class="navbar-header cardano logo">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#cardano-nav" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/"><img src="//static.iohk.io/cardano/images/cardano-white-120.png" alt="" width="50" height="45" /></a>
      </div>
  

    </div><!-- /.container -->
  </nav>

<div class="banner">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">


      <h1>Cardano Settlement Layer <span>Documentation</span></h1>

      <form id="site_search_form" class="" action="javascript:io_search_site()">


                      <div class="input-group">
                        <input id="site_search_input" type="text" class="form-control input-lg" placeholder="Search docs ..." onfocus="io_search_site()" />
                            <span class="input-group-btn">
                              <button type="submit" class="btn btn-default btn-lg"><em class="fa fa-search"></em></button>
                            </span>
                          </div><!-- /input-group -->


      </form>


      </div>
    </div>
  </div>
</div>

</div>

<div class="navbar-grad"></div>





      <div class="container">
          <!-- left, vertical navbar & content -->
          <div class="row">
              <!-- left, vertical navbar -->
              <div class="col-md-3 col-sm-4 col-left">

                	<ul class="nav navbar-collapse collapse navbar-side" id="cardano-nav">
                    <li class="nodesktop"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#cardano-nav" aria-expanded="false">
                      <span class="times">&times;</span>
                    </button></li>



                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                                        <li>
                                          
                                          <a href="/introduction/">Introduction</a>
                                          
                                          <ul>


                      
                      <li><a class="nosearch" href="/introduction/#cryptocurrency-basics">Cryptocurrency Basics</a></li>

                      
                      <li><a class="nosearch" href="/introduction/#what-makes-cardano-sl-special">What Makes Cardano SL Special?</a></li>

                      
                      <li><a class="nosearch" href="/introduction/#beyond-settlement-layer">Beyond Settlement Layer</a></li>

                      


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <span></span>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                                        </li>

                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                                        <li>
                                          
                                          <a href="/installation/">Installation</a>
                                          
                                          <ul>


                      


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                                        </li>

                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                                        <li>
                                          
                                          <span>Cardano overview</span>
                                          
                                          <ul>


                      


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/cardano/proof-of-stake/">Ouroboros Proof of Stake Algorithm</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/cardano/differences/">Differences Between the Paper and the Implementation</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/cardano/addresses/">Addresses</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/cardano/transactions/">Transactions</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/cardano/update-mechanism/">Update Mechanism</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/cardano/monetary-policy/">Monetary Policy</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/cardano/transaction-assurance/">Transaction Assurance Level</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                                        </li>

                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                                        <li>
                                          
                                          <a href="/technical/">Technical details</a>
                                          
                                          <ul>


                      


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/launcher/">Cardano SL Launcher</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/updater/">Cardano SL Updater</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/wallet/">Cardano SL Wallet</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <span>Scripting</span>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/plutus/introduction/">Introduction</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/plutus/types/">Types</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/plutus/examples/">Examples</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/blocks/">Blocks in Cardano SL</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/cli-options/">Cardano SL CLI Options</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <span>Protocols</span>
                        
                        <ul>


                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/protocols/csl-application-level/">CSL Application-Level Messaging</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/protocols/p2p/">P2P Layer</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/protocols/time-warp-nt/">Time-warp-NT Layer</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/protocols/network-transport/">Network Transport Layer</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <a href="/technical/protocols/binary-protocols/">Binary protocols</a>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/pstypebridge/">PureScript Type Bridge in Cardano SL</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/wallets/">Daedalus Client API</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/technical/pvss/">Cardano SL PVSS</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                                        </li>

                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                                        <li>
                                          
                                          <span>For Contributors</span>
                                          
                                          <ul>


                      


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/for-contributors/building-from-source/">Building Cardano SL and Daedalus from Source</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/for-contributors/haddock/">Haddock</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                                        </li>

                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                                        <li>
                                          
                                          <span>Cardano Timeline</span>
                                          
                                          <ul>


                      


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/timeline/testnet/">Testnet Era</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/timeline/bootstrap/">Bootstrap Era</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <a href="/timeline/reward/">Reward Era</a>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                                        </li>

                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                                        <li>
                                          
                                          <a href="/glossary/">Glossary</a>
                                          
                                          <ul>


                      


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      


                      <li>
                        
                        <span></span>
                        
                        <ul>


                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      

                      <li>
                        
                        <span></span>
                        
                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                      </li>

                      
                      
                      
                      
                      
                      
                      
                      

</ul>

                                        </li>

                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        
                                        

                  </ul>

              </div>

              <!-- content -->
              <div class="col-md-9 col-sm-8">
                <div id="search-output" class="none"></div>
                <div class="searching main" id="searching"></div>
                <div class="main" id="main">
                  
<h1 id="binary-protocols">Binary Protocols</h1>

<p>Sizes of all fields are represented in bytes. Big-Endian is used
everywhere. Composite types are serialized in the order of definition
with no delimiters.</p>

<p>For example, <code class="highlighter-rouge">(Word32, Word8)</code> is serialized with 5 bytes: 4
for <code class="highlighter-rouge">Word32</code>, and 1 for <code class="highlighter-rouge">Word8</code>.</p>

<p>For variable-length structures, dependent on object of type T, we use
<code class="highlighter-rouge">size(T)</code> notation.</p>

<p><code class="highlighter-rouge">Word32</code> is <em>unsigned integer of 32 bits</em> (<code class="highlighter-rouge">uint32</code>).</p>

<p>To test serialization of object <code class="highlighter-rouge">myObject</code> in <code class="highlighter-rouge">ghci</code>,
one should use the following commands in <code class="highlighter-rouge">cardano-sl</code> root project directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ stack repl
...
&lt;Press Enter&gt;
...
ghci&gt; import Data.ByteString.Builder
ghci&gt; let hexEncode myObject = toLazyByteString $ lazyByteStringHex $ Pos.Binary.encode $ myObject
ghci&gt; hexEncode (mkCoin 1000)
"0064"
</code></pre>
</div>

<h2 id="common-haskell-data-types">Common Haskell Data Types</h2>

<h3 id="maybe">Maybe</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">Maybe</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">Nothing</span> <span class="o">|</span> <span class="kt">Just</span> <span class="n">a</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">Maybe a</code> is either value of type <code class="highlighter-rouge">a</code> or empty (aka <code class="highlighter-rouge">null</code>, <code class="highlighter-rouge">None</code>).
To distinguish between two values we add 1 byte tag before data.</p>

<table>
  <thead>
    <tr>
      <th>Tag size</th>
      <th>Tag Type</th>
      <th>Tag Value</th>
      <th>Description</th>
      <th>Field size</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td>Tag for Nothing</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x01</td>
      <td>Tag for Just</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(a)</td>
      <td>Value of type <code class="highlighter-rouge">a</code></td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (Nothing :: Maybe Word32)
"00"
ghci&gt; hexEncode (Just 4  :: Maybe Word32)
"0100000004"
</code></pre>
</div>

<h3 id="either">Either</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">Either</span> <span class="n">a</span> <span class="n">b</span> <span class="o">=</span> <span class="kt">Left</span> <span class="n">a</span> <span class="o">|</span> <span class="kt">Right</span> <span class="n">b</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">Either a b</code> is either value of type <code class="highlighter-rouge">a</code> or value of type <code class="highlighter-rouge">b</code>. To distinguish between
two values we add 1 byte tag before data.</p>

<table>
  <thead>
    <tr>
      <th>Tag size</th>
      <th>Tag Type</th>
      <th>Tag Value</th>
      <th>Description</th>
      <th>Field size</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td>Tag for Left</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(a)</td>
      <td>Value of type <code class="highlighter-rouge">a</code></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x01</td>
      <td>Tag for Right</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(b)</td>
      <td>Value of type <code class="highlighter-rouge">b</code></td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (Left 3  :: Either Word16 Word32)
"000003"
ghci&gt; hexEncode (Right 4 :: Either Word16 Word32)
"0100000004"
</code></pre>
</div>

<h3 id="big-integer">Big Integer</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="c1">-- Fixed-size type for a subset of Integer</span>
<span class="kr">type</span> <span class="kt">SmallInt</span> <span class="o">=</span> <span class="kt">Int32</span>
</code></pre>
</div>

<p>Integers are encoded in two ways: if they fit inside a <code class="highlighter-rouge">SmallInt</code>,
they’re written as a byte tag, and that value. If the <code class="highlighter-rouge">Integer</code> value
is too large to fit in a SmallInt, it is written as a byte array,
along with a sign and length field.</p>

<p>For reference, see <a href="http://hackage.haskell.org/package/binary-0.8.4.1/docs/src/Data.Binary.Class.html#line-306">implementation</a>.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ (15 :: Integer)
"000000000f"
ghci&gt; hexEncode $ (  (2 :: Integer) ^ (128 :: Integer))
"010100000000000000110000000000000000000000000000000001"
ghci&gt; hexEncode $ (- (2 :: Integer) ^ (128 :: Integer))
"01ff00000000000000110000000000000000000000000000000001"
</code></pre>
</div>

<h3 id="unsigned-variable-length-integer">Unsigned Variable Length Integer</h3>

<p>This type will be referenced to later as <code class="highlighter-rouge">UVarInt Word16</code> or <code class="highlighter-rouge">UVarInt Word64</code>
to describe maximum available value.</p>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">newtype</span> <span class="kt">UnsignedVarInt</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">UnsignedVarInt</span> <span class="p">{</span><span class="n">getUnsignedVarInt</span> <span class="o">::</span> <span class="n">a</span><span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">NFData</span><span class="p">)</span>
</code></pre>
</div>

<p>Values are encoded 7 bits at a time, with the most significant one being a continuation bit.
Thus, the numbers from 0 to 127 require only a single byte to encode,
those from 128 to 16383 require two bytes, etc.</p>

<p>This <a href="https://developers.google.com/protocol-buffers/docs/encoding#varints">format</a>
is taken from Google’s Protocol Buffers, which provides a bit more verbiage on the encoding.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (UnsignedVarInt (3 :: Word32))
"03"
ghci&gt; hexEncode (UnsignedVarInt (126 :: Word32))
"7e"
ghci&gt; hexEncode (UnsignedVarInt (127 :: Word32))
"7f"
ghci&gt; hexEncode (UnsignedVarInt (128 :: Word32))
"8001"
</code></pre>
</div>

<h3 id="tiny-variable-length-integer">Tiny Variable Length Integer</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | A newtype wrapper for non-negative integers less than @2^14@. Use it if</span>
<span class="c1">-- you want to be extra careful. Compared to 'SignedVarInt' and</span>
<span class="c1">-- 'UnsignedVarInt', it provides two benefits:</span>
<span class="c1">--</span>
<span class="c1">-- * It is guaranteed to take either 1 or 2 bytes (the standard decoder for</span>
<span class="c1">--   variants can consume an unlimited amount of bytes).</span>
<span class="c1">--</span>
<span class="c1">-- * It is unambiguous (e.g. @0@ can be encoded in only one way instead of</span>
<span class="c1">--   two).</span>
<span class="kr">newtype</span> <span class="kt">TinyVarInt</span> <span class="o">=</span> <span class="kt">TinyVarInt</span> <span class="p">{</span><span class="n">getTinyVarInt</span> <span class="o">::</span> <span class="kt">Word16</span><span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">NFData</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-2</td>
      <td>UVarInt Word16</td>
      <td>Variable length integer up to 2^14 - 1</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ TinyVarInt 0
"00"
ghci&gt; hexEncode $ TinyVarInt (2^14 -1)
"ff7f"
</code></pre>
</div>

<h3 id="lists-nonempty-and-vectors">Lists, NonEmpty and Vectors</h3>

<p>Sometimes we store a list of some objects inside our datatypes. You will see
references to them as <code class="highlighter-rouge">Vector a</code> or <code class="highlighter-rouge">[a]</code>. You should read this as
<em>array of objects of types <code class="highlighter-rouge">a</code></em>. Both of these standard Haskell data types are
serialized in the same way. If you see <code class="highlighter-rouge">NonEmpty a</code> in type you should read it as <code class="highlighter-rouge">[a]</code>
but the size of that list is guaranteed to be at least <code class="highlighter-rouge">1</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Size of array</td>
    </tr>
    <tr>
      <td>n * size(a)</td>
      <td>a[n]</td>
      <td> </td>
      <td>Array with length <code class="highlighter-rouge">n</code> of objects of type <code class="highlighter-rouge">a</code></td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode ([1, 31] :: [Word16])
"020001001f"
ghci&gt; hexEncode ([0..135] :: [Word8])  -- 136 bytes from 0 to 135 including
"8801000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f2021222324252
62728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4
f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f70717273747576777
8797a7b7c7d7e7f8081828384858687"
</code></pre>
</div>

<h3 id="hashmap">HashMap</h3>

<p><code class="highlighter-rouge">HashMap key value</code> is mapping from keys to values. In serialization, HashMap
is represented as list of pairs from <code class="highlighter-rouge">key</code> and <code class="highlighter-rouge">value</code> and thus is serialized
as <code class="highlighter-rouge">[(key, value)]</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Size of HashMap</td>
    </tr>
    <tr>
      <td>n * (size(key) + size(value))</td>
      <td>&lt;key, value&gt;[n]</td>
      <td> </td>
      <td>Array with length <code class="highlighter-rouge">n</code> of objects of type <code class="highlighter-rouge">(key, value)</code></td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ Data.HashMap.Strict.fromList [(1 :: Word8, 127 :: Word64), (2, 255)]
"0201000000000000007f0200000000000000ff"
</code></pre>
</div>

<h2 id="networking">Networking</h2>

<h3 id="messagename">MessageName</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">newtype</span> <span class="kt">MessageName</span> <span class="o">=</span> <span class="kt">MessageName</span> <span class="kt">BS</span><span class="o">.</span><span class="kt">ByteString</span>
</code></pre>
</div>

<p>Generally, we use <code class="highlighter-rouge">MessageName</code> represented by one or two encoded <code class="highlighter-rouge">UnsignedVarInt</code>s.
At serialization state it is encoded as binary string, thus gets prefixed by
length of the string.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ messageName (Proxy :: Proxy SendProxySK)
"0102"
ghci&gt; hexEncode $ messageName (Proxy :: Proxy (DataMsg GtMsgContents))
"020a03"
</code></pre>
</div>

<h2 id="basic-cardano-sl-data-types">Basic Cardano SL Data Types</h2>

<h3 id="coin">Coin</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Coin is the least possible unit of currency.</span>
<span class="kr">newtype</span> <span class="kt">Coin</span> <span class="o">=</span> <span class="kt">Coin</span>
    <span class="p">{</span> <span class="n">getCoin</span> <span class="o">::</span> <span class="kt">Word64</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Bounded</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Data</span><span class="p">,</span> <span class="kt">NFData</span><span class="p">)</span>
</code></pre>
</div>

<p>Number of total coins is 45*10^9 * 10^6.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>45*10^15 needs 56 bits to represent
45*10^9  (integral mega coins) needs 36 bits to represent
999999   (floating mega coins) needs 20 bits to represent
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Decimal</th>
      <th>Needed Bits</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0-9</td>
      <td>4 bits</td>
    </tr>
    <tr>
      <td>0-99</td>
      <td>7 bits</td>
    </tr>
    <tr>
      <td>0-999</td>
      <td>10 bits</td>
    </tr>
    <tr>
      <td>0-9999</td>
      <td>14 bits</td>
    </tr>
    <tr>
      <td>0-99999</td>
      <td>17 bits</td>
    </tr>
    <tr>
      <td>0-999999</td>
      <td>20 bits</td>
    </tr>
  </tbody>
</table>

<p>Coin is splitted in mega coin (10^6) and the remaining coin for serialization.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>1000999 coin = 1.000999 mega coin
</code></pre>
</div>

<p>Simple variant encoding with <code class="highlighter-rouge">Word64</code> limit. The total length of the sequence is encoded
in the first byte with a variable mask.</p>

<table>
  <tbody>
    <tr>
      <td>header</td>
      <td>mask</td>
      <td>spare bits</td>
      <td>extra byte</td>
      <td>total bits as value</td>
      <td>serialized size</td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td>0 xxxxxxx</td>
      <td>0x7f</td>
      <td>7 bits</td>
      <td>0</td>
      <td>7 bits</td>
      <td>1 byte</td>
    </tr>
    <tr>
      <td>10 xxxxxx</td>
      <td>0x3f</td>
      <td>6 bits</td>
      <td>1</td>
      <td>14 bits</td>
      <td>2 bytes</td>
    </tr>
    <tr>
      <td>110 xxxxx</td>
      <td>0x1f</td>
      <td>5 bits</td>
      <td>2</td>
      <td>21 bits</td>
      <td>3 bytes</td>
    </tr>
    <tr>
      <td>1110 xxxx</td>
      <td>0x0f</td>
      <td>4 bits</td>
      <td>3</td>
      <td>27 bits</td>
      <td>4 bytes</td>
    </tr>
    <tr>
      <td>11110 xxx</td>
      <td>0x07</td>
      <td>3 bits</td>
      <td>4</td>
      <td>35 bits</td>
      <td>5 bytes</td>
    </tr>
    <tr>
      <td>111110 xx</td>
      <td>0x03</td>
      <td>2 bits</td>
      <td>5</td>
      <td>42 bits</td>
      <td>6 bytes</td>
    </tr>
    <tr>
      <td>1111110 x</td>
      <td>0x01</td>
      <td>1 bit</td>
      <td>6</td>
      <td>49 bits</td>
      <td>7 bytes</td>
    </tr>
    <tr>
      <td>11111110</td>
      <td>0x00</td>
      <td>0 bit</td>
      <td>7</td>
      <td>56 bits</td>
      <td>8 bytes</td>
    </tr>
    <tr>
      <td>11111111</td>
      <td>0x00</td>
      <td>0 bit</td>
      <td>8</td>
      <td>64 bits</td>
      <td>9 bytes</td>
    </tr>
  </tfoot>
</table>

<p>Specialized to the integral part which only needs 36 bits maximum:</p>

<table>
  <tbody>
    <tr>
      <td>header</td>
      <td>mask</td>
      <td>spare bits</td>
      <td>extra byte</td>
      <td>total bits as value</td>
      <td>serialized size</td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td>0 xxxxxxx</td>
      <td>0x7f</td>
      <td>7 bits</td>
      <td>0</td>
      <td>7 bits</td>
      <td>1 byte</td>
    </tr>
    <tr>
      <td>10 xxxxxx</td>
      <td>0x3f</td>
      <td>6 bits</td>
      <td>1</td>
      <td>14 bits</td>
      <td>2 bytes</td>
    </tr>
    <tr>
      <td>110 xxxxx</td>
      <td>0x1f</td>
      <td>5 bits</td>
      <td>2</td>
      <td>21 bits</td>
      <td>3 bytes</td>
    </tr>
    <tr>
      <td>1110 xxxx</td>
      <td>0x0f</td>
      <td>4 bits</td>
      <td>3</td>
      <td>27 bits</td>
      <td>4 bytes</td>
    </tr>
    <tr>
      <td>1111 xxxx</td>
      <td>0x0f</td>
      <td>4 bits</td>
      <td>4</td>
      <td>36 bits</td>
      <td>5 bytes</td>
    </tr>
  </tfoot>
</table>

<p>And the floating part, needs 20 bits to represent, encoding value from 0 to 999999:</p>

<table>
  <tbody>
    <tr>
      <td>header</td>
      <td>mask</td>
      <td>spare bits</td>
      <td>extra byte</td>
      <td>total bits as value</td>
      <td>serialized size</td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td>0 xxxxxx</td>
      <td>0x7f</td>
      <td>7 bits</td>
      <td>0</td>
      <td>7  bits</td>
      <td>1 byte</td>
    </tr>
    <tr>
      <td>10 xxxxxx</td>
      <td>0x3f</td>
      <td>6 bits</td>
      <td>1</td>
      <td>14 bits</td>
      <td>2 bytes</td>
    </tr>
    <tr>
      <td>110 xxxxx</td>
      <td>0x3f</td>
      <td>5 bits</td>
      <td>2</td>
      <td>21 bits</td>
      <td>3 bytes</td>
    </tr>
  </tfoot>
</table>

<p>Note: we could save one bit in the 3 bytes scheme here by considering the end of encoding
but we don’t need it, so by not changing the scheme we can re-use the previous scheme for
integral as is.</p>

<p>For details of implementations look at <a href="https://github.com/input-output-hk/cardano-sl/blob/8ea81d13a9610fe06de7d313879026791983a7d6/src/Pos/Binary/Coin.hs">this module</a>.</p>

<p>Examples:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (mkCoin 0)
"0000"
ghci&gt; hexEncode (mkCoin 1)
"00c186a0"
ghci&gt; hexEncode (mkCoin 2)
"00c30d40"
ghci&gt; hexEncode (mkCoin 31)
"00c1fbd0"
ghci&gt; hexEncode (mkCoin 128)
"00cc8708"
ghci&gt; hexEncode (mkCoin 129)
"00ce0da8"
ghci&gt; hexEncode (mkCoin 1000)
"0064"
ghci&gt; hexEncode (mkCoin 10000)
"000a"
ghci&gt; hexEncode (mkCoin 1000000)
"0100"
ghci&gt; hexEncode (mkCoin 1000999)
"01cf3e58"
</code></pre>
</div>

<h3 id="hash">Hash</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Hash wrapper with phantom type for more type-safety.</span>
<span class="c1">-- Made abstract in order to support different algorithms in</span>
<span class="c1">-- different situations</span>
<span class="kr">newtype</span> <span class="kt">AbstractHash</span> <span class="n">algo</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">AbstractHash</span> <span class="p">(</span><span class="kt">Digest</span> <span class="n">algo</span><span class="p">)</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">ByteArray</span><span class="o">.</span><span class="kt">ByteArrayAccess</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">NFData</span><span class="p">)</span>

<span class="cd">-- | Type alias for commonly used hash</span>
<span class="kr">type</span> <span class="kt">Hash</span> <span class="o">=</span> <span class="kt">AbstractHash</span> <span class="kt">Blake2b_256</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Word8[32]</td>
      <td>256 bits of hash digest</td>
    </tr>
  </tbody>
</table>

<p>So whenever you see <code class="highlighter-rouge">Hash SomeType</code> in the code, this field will occupy 32 bytes.
An additional type parameter after <code class="highlighter-rouge">Hash</code> is used only in code for
type-safety and has no impact on serialization.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hash $ mkCoin 3
AbstractHash 29bcdcff253cd2864a8b5e25992a6db86a7a41dc5e69c0599730f2c5716d9362
ghci&gt; hexEncode $ hash $ mkCoin 3
"29bcdcff253cd2864a8b5e25992a6db86a7a41dc5e69c0599730f2c5716d9362"
</code></pre>
</div>

<h3 id="public-key">Public Key</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Wrapper around 'Ed25519.PublicKey'.</span>
<span class="kr">newtype</span> <span class="kt">PublicKey</span> <span class="o">=</span> <span class="kt">PublicKey</span> <span class="kt">Ed25519</span><span class="o">.</span><span class="kt">PublicKey</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">NFData</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Word8[32]</td>
      <td>32 bytes of public key</td>
    </tr>
  </tbody>
</table>

<h3 id="signature">Signature</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Wrapper around 'Ed25519.Signature'.</span>
<span class="kr">newtype</span> <span class="kt">Signature</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">Signature</span> <span class="kt">Ed25519</span><span class="o">.</span><span class="kt">Signature</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">NFData</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>64</td>
      <td>Word8[64]</td>
      <td>64 bytes of signature string</td>
    </tr>
  </tbody>
</table>

<h3 id="epoch-index">Epoch Index</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Index of epoch.</span>
<span class="kr">newtype</span> <span class="kt">EpochIndex</span> <span class="o">=</span> <span class="kt">EpochIndex</span>
    <span class="p">{</span> <span class="n">getEpochIndex</span> <span class="o">::</span> <span class="kt">Word64</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Num</span><span class="p">,</span> <span class="kt">Enum</span><span class="p">,</span> <span class="kt">Integral</span><span class="p">,</span> <span class="kt">Real</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Bounded</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>epoch index</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (EpochIndex 128)
"8001"
</code></pre>
</div>

<h3 id="local-slot-index">Local Slot Index</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Index of slot inside a concrete epoch.</span>
<span class="kr">newtype</span> <span class="kt">LocalSlotIndex</span> <span class="o">=</span> <span class="kt">LocalSlotIndex</span>
    <span class="p">{</span> <span class="n">getSlotIndex</span> <span class="o">::</span> <span class="kt">Word16</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Num</span><span class="p">,</span> <span class="kt">Enum</span><span class="p">,</span> <span class="kt">Ix</span><span class="p">,</span> <span class="kt">Integral</span><span class="p">,</span> <span class="kt">Real</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Buildable</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-3</td>
      <td>UVarInt Word16</td>
      <td>index of local slot</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (LocalSlotIndex 15)
"0f"
</code></pre>
</div>

<h3 id="slotid">SlotId</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Slot is identified by index of epoch and local index of slot in</span>
<span class="c1">-- this epoch. This is a global index</span>
<span class="kr">data</span> <span class="kt">SlotId</span> <span class="o">=</span> <span class="kt">SlotId</span>
    <span class="p">{</span> <span class="n">siEpoch</span> <span class="o">::</span> <span class="o">!</span><span class="kt">EpochIndex</span>
    <span class="p">,</span> <span class="n">siSlot</span>  <span class="o">::</span> <span class="o">!</span><span class="kt">LocalSlotIndex</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>Epoch index</td>
    </tr>
    <tr>
      <td>1-3</td>
      <td>UVarInt Word16</td>
      <td>Slot index inside a concrete epoch</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (SlotId 128 15)
"80010f"
</code></pre>
</div>

<h3 id="attributes">Attributes</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Convenient wrapper for the datatype to represent it (in binary</span>
<span class="c1">-- format) as k-v map.</span>
<span class="kr">data</span> <span class="kt">Attributes</span> <span class="n">h</span> <span class="o">=</span> <span class="kt">Attributes</span>
    <span class="p">{</span> <span class="c1">-- | Data, containing known keys (deserialized)</span>
      <span class="n">attrData</span>   <span class="o">::</span> <span class="n">h</span>
      <span class="c1">-- | Unparsed ByteString</span>
    <span class="p">,</span> <span class="n">attrRemain</span> <span class="o">::</span> <span class="kt">ByteString</span>
    <span class="p">}</span>
  <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="general-case-serialization">General Case Serialization</h4>

<p>Stored as <code class="highlighter-rouge">totalLen + (k, v) pairs + some remaining part</code>. <code class="highlighter-rouge">attrData</code> is stored as list of
pairs <code class="highlighter-rouge">(Word8, v)</code> where <code class="highlighter-rouge">key</code> has type <code class="highlighter-rouge">Word8</code> and you should specify how to encode <code class="highlighter-rouge">h</code> in
that way.</p>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int64</td>
      <td>m + n</td>
      <td>Size of attributes in bytes</td>
    </tr>
    <tr>
      <td>m = t * (1 + size(v))</td>
      <td>&lt;Word8,v&gt;[t]</td>
      <td> </td>
      <td>Array of pairs. Given without length.</td>
    </tr>
    <tr>
      <td>n</td>
      <td>ByteString</td>
      <td> </td>
      <td>Remaining byte array</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; toLazyByteString
      $ lazyByteStringHex
      $ runPut
      $ putAttributes (\h -&gt; [(1, put h), (0, put h)])
      $ Attributes (9 :: Word32) "abc"
"0d0000000009010000000961626"
</code></pre>
</div>

<p>Here <code class="highlighter-rouge">h = 9 :: Word32</code> and we encode <code class="highlighter-rouge">h</code> as two <em>key-value</em> pairs: value is 4-byte <code class="highlighter-rouge">9</code>
and keys are <code class="highlighter-rouge">0</code> and <code class="highlighter-rouge">1</code>.</p>

<h4 id="attributes-">Attributes ()</h4>

<p>In this special case no <code class="highlighter-rouge">(key, value)</code> pairs are stored — only arbitrary length byte array.</p>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-4</td>
      <td>UVarInt Int64</td>
      <td>n</td>
      <td>Size of attributes in bytes. Should be &lt; 2^28</td>
    </tr>
    <tr>
      <td>n</td>
      <td>Word8[n]</td>
      <td> </td>
      <td><code class="highlighter-rouge">n</code> bytes of data</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ Attributes () (BSS.pack [])
"00"
ghci&gt; hexEncode $ Attributes () (BSS.pack [1,31])
"02011f"
ghci&gt; hexEncode $ Attributes () "abc"
"03616263"
</code></pre>
</div>

<h3 id="script">Script</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Version of script</span>
<span class="kr">type</span> <span class="kt">ScriptVersion</span> <span class="o">=</span> <span class="kt">Word16</span>

<span class="cd">-- | A script for inclusion into a transaction.</span>
<span class="kr">data</span> <span class="kt">Script</span> <span class="o">=</span> <span class="kt">Script</span> <span class="p">{</span>
    <span class="n">scrVersion</span> <span class="o">::</span> <span class="kt">ScriptVersion</span><span class="p">,</span>    <span class="c1">-- ^ Version</span>
    <span class="n">scrScript</span>  <span class="o">::</span> <span class="kt">LByteString</span><span class="p">}</span>      <span class="c1">-- ^ Serialized script</span>
  <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-3</td>
      <td>UVarInt Word16</td>
      <td> </td>
      <td>Script version</td>
    </tr>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int64</td>
      <td>n</td>
      <td>Size of byte array</td>
    </tr>
    <tr>
      <td>n</td>
      <td>Word8[n]</td>
      <td> </td>
      <td>n bytes of script</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ Script 0 "a"
"000161"
</code></pre>
</div>

<h3 id="address-attributes">Address Attributes</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">AddrPkAttrs</span> <span class="o">=</span> <span class="kt">AddrPkAttrs</span>
    <span class="p">{</span> <span class="n">addrPkDerivationPath</span> <span class="o">::</span> <span class="kt">Maybe</span> <span class="p">[</span><span class="kt">Word32</span><span class="p">]</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">,</span> <span class="kt">Show</span><span class="p">)</span>

<span class="kr">type</span> <span class="kt">PubKeyAddressAttributes</span> <span class="o">=</span> <span class="kt">Attributes</span> <span class="kt">AddrPkAttrs</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-2</td>
      <td>TinyVarInt</td>
      <td>n + m</td>
      <td>sise of <code class="highlighter-rouge">PubKeyAddress</code> content</td>
    </tr>
    <tr>
      <td>n</td>
      <td>Maybe (Word8, [Word32])</td>
      <td> </td>
      <td>Empty for nothing and list of Word32 preceded with zero</td>
    </tr>
    <tr>
      <td>m</td>
      <td>ByteString</td>
      <td> </td>
      <td>Remaining bytes</td>
    </tr>
  </tbody>
</table>

<p>See examples in next section.</p>

<h3 id="address">Address</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">type</span> <span class="kt">AddressHash</span> <span class="o">=</span> <span class="kt">AbstractHash</span> <span class="kt">Blake2b_224</span>

<span class="cd">-- | Stakeholder identifier (stakeholders are identified by their public keys)</span>
<span class="kr">type</span> <span class="kt">StakeholderId</span> <span class="o">=</span> <span class="kt">AddressHash</span> <span class="kt">PublicKey</span>

<span class="cd">-- | Address is where you can send coins.</span>
<span class="kr">data</span> <span class="kt">Address</span>
    <span class="o">=</span> <span class="kt">PubKeyAddress</span>
          <span class="p">{</span> <span class="n">addrKeyHash</span>      <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">AddressHash</span> <span class="kt">PublicKey</span><span class="p">)</span>
          <span class="p">,</span> <span class="n">addrPkAttributes</span> <span class="o">::</span> <span class="o">!</span><span class="kt">PubKeyAddressAttributes</span> <span class="p">}</span>
    <span class="o">|</span> <span class="kt">ScriptAddress</span>
          <span class="p">{</span> <span class="n">addrScriptHash</span> <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">AddressHash</span> <span class="kt">Script</span><span class="p">)</span> <span class="p">}</span>
    <span class="o">|</span> <span class="kt">UnknownAddressType</span> <span class="o">!</span><span class="kt">Word8</span> <span class="o">!</span><span class="kt">ByteString</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">,</span> <span class="kt">Show</span><span class="p">)</span>
</code></pre>
</div>

<h4 id="public-key-address">Public Key Address</h4>

<p><code class="highlighter-rouge">addrPkAttributes</code> field is required for HD-wallets.</p>

<table>
  <thead>
    <tr>
      <th>Size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td><code class="highlighter-rouge">PubKeyAddress</code> tag</td>
    </tr>
    <tr>
      <td>1-2</td>
      <td>TinyVarInt</td>
      <td>28 + m</td>
      <td>Size of <code class="highlighter-rouge">PubKeyAddress</code> content</td>
    </tr>
    <tr>
      <td>28</td>
      <td>Word8[28]</td>
      <td> </td>
      <td><code class="highlighter-rouge">addKeyHash</code>: 28 bytes of Blake2b_224 hash</td>
    </tr>
    <tr>
      <td>m</td>
      <td>PubKeyAddressAttributes</td>
      <td> </td>
      <td><code class="highlighter-rouge">addrPkAttributes</code></td>
    </tr>
    <tr>
      <td>4</td>
      <td>Word32</td>
      <td> </td>
      <td>CRC32 of all previous data</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; abstractHash somPk :: AddressHash PublicKey
AbstractHash 380dea393a631ad563154a13bc5ee49fa4b62a60218358b5dcb875e0
ghci&gt; hexEncode $ PubKeyAddress (abstractHash somePk) (Attributes (AddrPkAttrs Nothing) "a")
"001e380dea393a631ad563154a13bc5ee49fa4b62a60218358b5dcb875e00161cf52c5ec"
ghci&gt; hexEncode $ PubKeyAddress (abstractHash somePk) (Attributes (AddrPkAttrs $ Just [3,9]) "a")
"0028380dea393a631ad563154a13bc5ee49fa4b62a60218358b5dcb875e00b0002000000030000000961f1d810f7"
</code></pre>
</div>

<p>You can notice in first example, that <code class="highlighter-rouge">0xCF52C5EC</code> is CRC32 of
<code class="highlighter-rouge">001e380dea393a631ad563154a13bc5ee49fa4b62a60218358b5dcb875e00161</code>.</p>

<h4 id="script-address">Script Address</h4>

<table>
  <thead>
    <tr>
      <th>Size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x01</td>
      <td><code class="highlighter-rouge">ScriptAddress</code> tag</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x1C</td>
      <td>Size of <code class="highlighter-rouge">addrScriptHash</code>: always 28</td>
    </tr>
    <tr>
      <td>28</td>
      <td>Word8[28]</td>
      <td> </td>
      <td>28 bytes of Blake2b_224 hash</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Word32</td>
      <td> </td>
      <td>CRC32 of all previous data</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ ScriptAddress (abstractHash $ Script 0 "a")
"011c7ec20301993e369571c6225e1e563812198433801820a2d7328756dc61c5be8e"
</code></pre>
</div>

<p>As you can notice, 4-byte suffix <code class="highlighter-rouge">0x61c5be8e</code> is CRC32 of prefix:
<code class="highlighter-rouge">011c7ec20301993e369571c6225e1e563812198433801820a2d7328756dc</code>.</p>

<h4 id="unknown-address">Unknown Address</h4>

<table>
  <thead>
    <tr>
      <th>Size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td> </td>
      <td>t</td>
      <td><code class="highlighter-rouge">UnknownAddress</code> tag</td>
    </tr>
    <tr>
      <td>1-2</td>
      <td>TinyVarInt</td>
      <td>n</td>
      <td>Size of unknown address</td>
    </tr>
    <tr>
      <td>n</td>
      <td>Word8[n]</td>
      <td> </td>
      <td>Unknown address itself</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Word32</td>
      <td> </td>
      <td>CRC32 of all previous data</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<p>Let’s encode <code class="highlighter-rouge">UnknownAddressType 3 "a"</code>. Without CRC32 this will be encoded as <code class="highlighter-rouge">0x030161</code>.
CRC32 of <code class="highlighter-rouge">0x030161</code> is <code class="highlighter-rouge">0xDEA907C4</code>. Thus we have:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode $ UnknownAddressType 3 "a"
"030161dea907c4"
</code></pre>
</div>

<h3 id="merkleroot">MerkleRoot</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Data type for root of merkle tree.</span>
<span class="kr">newtype</span> <span class="kt">MerkleRoot</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">MerkleRoot</span>
    <span class="p">{</span> <span class="n">getMerkleRoot</span> <span class="o">::</span> <span class="kt">Hash</span> <span class="kt">Raw</span>  <span class="c1">-- ^ returns root 'Hash' of Merkle Tree</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">ByteArrayAccess</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Hash Raw</td>
      <td>Root hash of Merkle tree</td>
    </tr>
  </tbody>
</table>

<h3 id="chain-difficulty">Chain Difficulty</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Chain difficulty represents necessary effort to generate a</span>
<span class="c1">-- chain. In the simplest case it can be the number of blocks in the chain.</span>
<span class="kr">newtype</span> <span class="kt">ChainDifficulty</span> <span class="o">=</span> <span class="kt">ChainDifficulty</span>
    <span class="p">{</span> <span class="n">getChainDifficulty</span> <span class="o">::</span> <span class="kt">Word64</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Num</span><span class="p">,</span> <span class="kt">Enum</span><span class="p">,</span> <span class="kt">Real</span><span class="p">,</span> <span class="kt">Integral</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Buildable</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>Chain difficulty</td>
    </tr>
  </tbody>
</table>

<h3 id="slotleaders">SlotLeaders</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>-- | 'NonEmpty' list of slot leaders.
type SlotLeaders = NonEmpty StakeholderId
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Size of slot leaders list</td>
    </tr>
    <tr>
      <td>n * size(StakeholderId)</td>
      <td>StakeholderId[n]</td>
      <td> </td>
      <td>List of slot leaders of size n</td>
    </tr>
  </tbody>
</table>

<h2 id="godtossing">GodTossing</h2>

<h3 id="cryptopvss">Crypto.Pvss</h3>

<p>Types prefixed with Pvss are defined in <a href="https://hackage.haskell.org/package/pvss-0.1/docs/Crypto-PVSS.html">Crypto.Pvss</a> module. This section describes binary format of these types.</p>

<h4 id="point">Point</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">newtype</span> <span class="kt">Point</span> <span class="o">=</span> <span class="kt">Point</span> <span class="p">{</span> <span class="n">unPoint</span> <span class="o">::</span> <span class="kt">SSL</span><span class="o">.</span><span class="kt">EcPoint</span> <span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>33</td>
      <td>ByteString</td>
      <td>Binary represented elliptic curve point (see ecPointFromOct function)</td>
    </tr>
  </tbody>
</table>

<h4 id="secret">Secret</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Secret</span>
<span class="kr">newtype</span> <span class="kt">Secret</span> <span class="o">=</span> <span class="kt">Secret</span> <span class="kt">Point</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">NFData</span><span class="p">,</span><span class="kt">Binary</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Point)</td>
      <td>Point</td>
      <td>Secret</td>
    </tr>
  </tbody>
</table>

<h4 id="proof">Proof</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">newtype</span> <span class="kt">Scalar</span> <span class="o">=</span> <span class="kt">Scalar</span> <span class="p">{</span> <span class="n">unScalar</span> <span class="o">::</span> <span class="kt">Integer</span> <span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">Generic</span><span class="p">,</span><span class="kt">NFData</span><span class="p">)</span>

<span class="kr">newtype</span> <span class="kt">Challenge</span> <span class="o">=</span> <span class="kt">Challenge</span> <span class="kt">ByteString</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">NFData</span><span class="p">)</span>

<span class="cd">-- | The generated proof</span>
<span class="kr">data</span> <span class="kt">Proof</span> <span class="o">=</span> <span class="kt">Proof</span>
    <span class="p">{</span> <span class="n">proof_c</span> <span class="o">::</span> <span class="o">!</span><span class="kt">Challenge</span>
    <span class="p">,</span> <span class="n">proof_z</span> <span class="o">::</span> <span class="o">!</span><span class="kt">Scalar</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>ByteString</td>
      <td>32-byte string challenge</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Integer</td>
      <td>32-byte integer scalar</td>
    </tr>
  </tbody>
</table>

<h4 id="decryptedshare">DecryptedShare</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | An decrypted share decrypted by a party's key and</span>
<span class="kr">data</span> <span class="kt">DecryptedShare</span> <span class="o">=</span> <span class="kt">DecryptedShare</span>
    <span class="p">{</span> <span class="n">decryptedShareID</span>    <span class="o">::</span> <span class="o">!</span><span class="kt">ShareId</span>
    <span class="p">,</span> <span class="n">shareDecryptedVal</span>   <span class="o">::</span> <span class="o">!</span><span class="kt">Point</span> <span class="c1">-- ^ decrypted share</span>
    <span class="p">,</span> <span class="n">decryptedValidProof</span> <span class="o">::</span> <span class="o">!</span><span class="kt">Proof</span> <span class="c1">-- ^ proof the decryption is valid</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Integer</td>
      <td>Share id</td>
    </tr>
    <tr>
      <td>size(Point)</td>
      <td>Point</td>
      <td>Decrypted share</td>
    </tr>
    <tr>
      <td>size(Proof)</td>
      <td>Proof</td>
      <td>Proof the description is valid</td>
    </tr>
  </tbody>
</table>

<h4 id="extragen">ExtraGen</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Extra generator</span>
<span class="kr">newtype</span> <span class="kt">ExtraGen</span> <span class="o">=</span> <span class="kt">ExtraGen</span> <span class="kt">Point</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">NFData</span><span class="p">,</span><span class="kt">Binary</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Point)</td>
      <td>Point</td>
      <td>Extra generator</td>
    </tr>
  </tbody>
</table>

<h4 id="commitment">Commitment</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">newtype</span> <span class="kt">Commitment</span> <span class="o">=</span> <span class="kt">Commitment</span> <span class="p">{</span> <span class="n">unCommitment</span> <span class="o">::</span> <span class="kt">Point</span> <span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">NFData</span><span class="p">,</span><span class="kt">Binary</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Point)</td>
      <td>Point</td>
      <td>Commitment</td>
    </tr>
  </tbody>
</table>

<h4 id="publickey">PublicKey</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Public Key</span>
<span class="kr">newtype</span> <span class="kt">PublicKey</span> <span class="o">=</span> <span class="kt">PublicKey</span> <span class="kt">Point</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span><span class="kt">Eq</span><span class="p">,</span><span class="kt">NFData</span><span class="p">,</span><span class="kt">Binary</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Point)</td>
      <td>Point</td>
      <td>Public key</td>
    </tr>
  </tbody>
</table>

<h3 id="secret-sharing">Secret Sharing</h3>

<p>Most of following types are just aliases for Pvss types, so they are serialized in the same way.</p>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Secret can be generated by `genSharedSecret` function along with shares.</span>
<span class="kr">newtype</span> <span class="kt">Secret</span> <span class="o">=</span> <span class="kt">Secret</span>
    <span class="p">{</span> <span class="n">getSecret</span> <span class="o">::</span> <span class="kt">Pvss</span><span class="o">.</span><span class="kt">Secret</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>

<span class="cd">-- | Shares can be used to reconstruct Secret.</span>
<span class="kr">newtype</span> <span class="kt">Share</span> <span class="o">=</span> <span class="kt">Share</span>
    <span class="p">{</span> <span class="n">getShare</span> <span class="o">::</span> <span class="kt">Pvss</span><span class="o">.</span><span class="kt">DecryptedShare</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>

<span class="cd">-- | Encrypted share which needs to be decrypted using VssKeyPair first.</span>
<span class="kr">newtype</span> <span class="kt">EncShare</span> <span class="o">=</span> <span class="kt">EncShare</span>
    <span class="p">{</span> <span class="n">getEncShare</span> <span class="o">::</span> <span class="kt">Pvss</span><span class="o">.</span><span class="kt">EncryptedShare</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>

<span class="cd">-- | This extra data may be used to verify encrypted share.</span>
<span class="kr">data</span> <span class="kt">SecretSharingExtra</span> <span class="o">=</span>
    <span class="kt">SecretSharingExtra</span> <span class="o">!</span><span class="kt">Pvss</span><span class="o">.</span><span class="kt">ExtraGen</span>
                       <span class="o">!</span><span class="p">[</span><span class="kt">Pvss</span><span class="o">.</span><span class="kt">Commitment</span><span class="p">]</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>

<span class="cd">-- | SecretProof may be used to commit Secret without revealing it.</span>
<span class="kr">newtype</span> <span class="kt">SecretProof</span> <span class="o">=</span>
    <span class="kt">SecretProof</span> <span class="kt">Pvss</span><span class="o">.</span><span class="kt">Proof</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>

<span class="cd">-- | This key is used as public key in VSS.</span>
<span class="kr">newtype</span> <span class="kt">VssPublicKey</span> <span class="o">=</span> <span class="kt">VssPublicKey</span>
    <span class="p">{</span> <span class="n">getVssPublicKey</span> <span class="o">::</span> <span class="kt">Pvss</span><span class="o">.</span><span class="kt">PublicKey</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>
</code></pre>
</div>

<p>Format of SecretSharingExtra:</p>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(ExtraGen)</td>
      <td>Pvss.ExtraGen</td>
      <td> </td>
      <td>Extra generator</td>
    </tr>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Length of commitments list</td>
    </tr>
    <tr>
      <td>n * size(Pvss.Commitment)</td>
      <td>[Pvss.Commitment]</td>
      <td> </td>
      <td>Commitments</td>
    </tr>
  </tbody>
</table>

<h3 id="commitments-openings-and-shares">Commitments, Openings and Shares</h3>

<h4 id="commitment-1">Commitment</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Commitment is a message generated during the first stage of</span>
<span class="c1">-- GodTossing. It contains encrypted shares and proof of secret.</span>
<span class="c1">-- Invariant which must be ensured: commShares is not empty.</span>
<span class="kr">data</span> <span class="kt">Commitment</span> <span class="o">=</span> <span class="kt">Commitment</span>
    <span class="p">{</span> <span class="n">commExtra</span>  <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">AsBinary</span> <span class="kt">SecretSharingExtra</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">commProof</span>  <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">AsBinary</span> <span class="kt">SecretProof</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">commShares</span> <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">HashMap</span> <span class="p">(</span><span class="kt">AsBinary</span> <span class="kt">VssPublicKey</span><span class="p">)</span> <span class="p">(</span><span class="kt">AsBinary</span> <span class="kt">EncShare</span><span class="p">))</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td> </td>
    </tr>
    <tr>
      <td>n * (sizeof(VssPublicKey) + sizeof(EncShare))</td>
      <td>HashMap (AsBinary VssPublicKey) (AsBinary EncShare)</td>
      <td> </td>
      <td>commShares</td>
    </tr>
    <tr>
      <td>sizeof(SecretSharingExtra)</td>
      <td>AsBinary SecretSharingExtra</td>
      <td> </td>
      <td>commExtra</td>
    </tr>
    <tr>
      <td>sizeof(SecretProof)</td>
      <td>AsBinary SecretProof</td>
      <td> </td>
      <td>commProof</td>
    </tr>
  </tbody>
</table>

<h4 id="commitmentsignature">CommitmentSignature</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Signature which ensures that commitment was generated by node</span>
<span class="c1">-- with given public key for given epoch.</span>
<span class="kr">type</span> <span class="kt">CommitmentSignature</span> <span class="o">=</span> <span class="kt">Signature</span> <span class="p">(</span><span class="kt">EpochIndex</span><span class="p">,</span> <span class="kt">Commitment</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Signature)</td>
      <td>Signature (EpochIndex, Commitment)</td>
      <td>Signature which ensures that commitment was generated by node with given public key for given epoch</td>
    </tr>
  </tbody>
</table>

<h4 id="signedcommitment">SignedCommitment</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">type</span> <span class="kt">SignedCommitment</span> <span class="o">=</span> <span class="p">(</span><span class="kt">PublicKey</span><span class="p">,</span> <span class="kt">Commitment</span><span class="p">,</span> <span class="kt">CommitmentSignature</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(PublicKey)</td>
      <td>PublicKey</td>
      <td>Public key of node that generated this commitment</td>
    </tr>
    <tr>
      <td>size(Commitment)</td>
      <td>Commitment</td>
      <td>Commitment</td>
    </tr>
    <tr>
      <td>size(CommitmentSignature)</td>
      <td>CommitmentSignature</td>
      <td>Commitment signature</td>
    </tr>
  </tbody>
</table>

<h4 id="commitmentsmap">CommitmentsMap</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | 'CommitmentsMap' is a wrapper for 'HashMap StakeholderId SignedCommitment'</span>
<span class="c1">-- which ensures that keys are consistent with values, i. e. 'PublicKey'</span>
<span class="c1">-- from 'SignedCommitment' corresponds to key which is 'StakeholderId'.</span>
<span class="kr">newtype</span> <span class="kt">CommitmentsMap</span> <span class="o">=</span> <span class="kt">CommitmentsMap</span>
    <span class="p">{</span> <span class="n">getCommitmentsMap</span> <span class="o">::</span> <span class="kt">HashMap</span> <span class="kt">StakeholderId</span> <span class="kt">SignedCommitment</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Semigroup</span><span class="p">,</span> <span class="kt">Monoid</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Container</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Number of commitments in map</td>
    </tr>
    <tr>
      <td>n * (size(StakeholderId) + size(SignedCommitment))</td>
      <td>HashMap StakeholderId SignedCommitment</td>
      <td> </td>
      <td>Commitments map as list of pairs</td>
    </tr>
  </tbody>
</table>

<h4 id="opening">Opening</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Opening reveals secret.</span>
<span class="kr">newtype</span> <span class="kt">Opening</span> <span class="o">=</span> <span class="kt">Opening</span>
    <span class="p">{</span> <span class="n">getOpening</span> <span class="o">::</span> <span class="p">(</span><span class="kt">AsBinary</span> <span class="kt">Secret</span><span class="p">)</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Buildable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Secret)</td>
      <td>AsBinary Secret</td>
      <td>Revealed secret</td>
    </tr>
  </tbody>
</table>

<h4 id="openingsmap">OpeningsMap</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">type</span> <span class="kt">OpeningsMap</span> <span class="o">=</span> <span class="kt">HashMap</span> <span class="kt">StakeholderId</span> <span class="kt">Opening</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Number of openings in map</td>
    </tr>
    <tr>
      <td>n * (size(StakeholderId) + size(Opening))</td>
      <td>HashMap StakeholderId Opening</td>
      <td> </td>
      <td>Openings map as list of pairs</td>
    </tr>
  </tbody>
</table>

<h4 id="vsscertificate">VssCertificate</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | VssCertificate allows VssPublicKey to participate in MPC.</span>
<span class="c1">-- Each stakeholder should create a Vss keypair, sign VSS public key with signing</span>
<span class="c1">-- key and send it into blockchain.</span>
<span class="c1">--</span>
<span class="c1">-- A public key of node is included in certificate in order to</span>
<span class="c1">-- enable validation of it using only node's P2PKH address.</span>
<span class="c1">-- Expiry epoch is last epoch when certificate is valid, expiry epoch is included</span>
<span class="c1">-- in certificate and signature.</span>
<span class="c1">--</span>
<span class="c1">-- Other nodes accept this certificate if it is valid and if node has</span>
<span class="c1">-- enough stake.</span>
<span class="c1">--</span>
<span class="c1">-- Invariant: 'checkSig vcSigningKey (vcVssKey, vcExpiryEpoch) vcSignature'.</span>
<span class="kr">data</span> <span class="kt">VssCertificate</span> <span class="o">=</span> <span class="kt">VssCertificate</span>
    <span class="p">{</span> <span class="n">vcVssKey</span>      <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">AsBinary</span> <span class="kt">VssPublicKey</span><span class="p">)</span>
    <span class="p">,</span> <span class="n">vcExpiryEpoch</span> <span class="o">::</span> <span class="o">!</span><span class="kt">EpochIndex</span>
    <span class="c1">-- ^ Epoch up to which certificates is valid.</span>
    <span class="p">,</span> <span class="n">vcSignature</span>   <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Signature</span> <span class="p">(</span><span class="kt">AsBinary</span> <span class="kt">VssPublicKey</span><span class="p">,</span> <span class="kt">EpochIndex</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">vcSigningKey</span>  <span class="o">::</span> <span class="o">!</span><span class="kt">PublicKey</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(VssPublicKey)</td>
      <td>AsBinary VssPublicKey</td>
      <td>Public key of stakeholder which is allowed to participate in MPC</td>
    </tr>
    <tr>
      <td>size(EpochIndex)</td>
      <td>EpochIndex</td>
      <td>Last epoch when certificate is valid</td>
    </tr>
    <tr>
      <td>size(Signature)</td>
      <td>Signature (AsBinary VssPublicKey, EpochIndex)</td>
      <td>Signature</td>
    </tr>
    <tr>
      <td>size(PublicKey)</td>
      <td>PublicKey</td>
      <td>Signing key</td>
    </tr>
  </tbody>
</table>

<h4 id="vsscertificatesmap">VssCertificatesMap</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | VssCertificatesMap contains all valid certificates collected</span>
<span class="c1">-- during some period of time.</span>
<span class="kr">type</span> <span class="kt">VssCertificatesMap</span> <span class="o">=</span> <span class="kt">HashMap</span> <span class="kt">StakeholderId</span> <span class="kt">VssCertificate</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Number of certificates in map</td>
    </tr>
    <tr>
      <td>n * (size(StakeholderId) + size(VssCertificate))</td>
      <td>HashMap StakeholderId VssCertificate</td>
      <td> </td>
      <td>Vss certificates map as list of pairs</td>
    </tr>
  </tbody>
</table>

<h3 id="gtproof">GtProof</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Proof of MpcData.</span>
<span class="c1">-- We can use ADS for commitments, openings, shares as well,</span>
<span class="c1">-- if we find it necessary.</span>
<span class="kr">data</span> <span class="kt">GtProof</span>
    <span class="o">=</span> <span class="kt">CommitmentsProof</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">CommitmentsMap</span><span class="p">)</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">VssCertificatesMap</span><span class="p">)</span>
    <span class="o">|</span> <span class="kt">OpeningsProof</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">OpeningsMap</span><span class="p">)</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">VssCertificatesMap</span><span class="p">)</span>
    <span class="o">|</span> <span class="kt">SharesProof</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">SharesMap</span><span class="p">)</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">VssCertificatesMap</span><span class="p">)</span>
    <span class="o">|</span> <span class="kt">CertificatesProof</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">VssCertificatesMap</span><span class="p">)</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Tag size</th>
      <th>Tag Type</th>
      <th>Tag Value</th>
      <th>Description</th>
      <th>Field size</th>
      <th>Field Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td>Tag for CommitmentsProof</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>Hash CommitmentsMap</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>Hash VssCertificatesMap</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x01</td>
      <td>Tag for OpeningsProof</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>Hash OpeningsMap</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>Hash VssCertificatesMap</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x02</td>
      <td>Tag for SharesProof</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>Hash SharesMap</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>Hash VssCertificatesMap</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x03</td>
      <td>Tag for CertificatesProof</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>Hash VssCertificatesMap</td>
    </tr>
  </tbody>
</table>

<h2 id="block-headers">Block Headers</h2>

<h3 id="blockversion">BlockVersion</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Communication protocol version.</span>
<span class="kr">data</span> <span class="kt">BlockVersion</span> <span class="o">=</span> <span class="kt">BlockVersion</span>
    <span class="p">{</span> <span class="n">bvMajor</span> <span class="o">::</span> <span class="o">!</span><span class="kt">Word16</span>
    <span class="p">,</span> <span class="n">bvMinor</span> <span class="o">::</span> <span class="o">!</span><span class="kt">Word16</span>
    <span class="p">,</span> <span class="n">bvAlt</span>   <span class="o">::</span> <span class="o">!</span><span class="kt">Word8</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2</td>
      <td>Word16</td>
      <td>Major version</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Word16</td>
      <td>Minor version</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>Alt version from initial US spec</td>
    </tr>
  </tbody>
</table>

<h3 id="softwareversion">SoftwareVersion</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">newtype</span> <span class="kt">ApplicationName</span> <span class="o">=</span> <span class="kt">ApplicationName</span>
    <span class="p">{</span> <span class="n">getApplicationName</span> <span class="o">::</span> <span class="kt">Text</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">,</span> <span class="kt">ToString</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Buildable</span><span class="p">,</span> <span class="kt">ToJSON</span><span class="p">,</span> <span class="kt">FromJSON</span><span class="p">)</span>

<span class="cd">-- | Numeric software version associated with ApplicationName.</span>
<span class="kr">type</span> <span class="kt">NumSoftwareVersion</span> <span class="o">=</span> <span class="kt">Word32</span>

<span class="cd">-- | Software version.</span>
<span class="kr">data</span> <span class="kt">SoftwareVersion</span> <span class="o">=</span> <span class="kt">SoftwareVersion</span>
    <span class="p">{</span> <span class="n">svAppName</span> <span class="o">::</span> <span class="o">!</span><span class="kt">ApplicationName</span>
    <span class="p">,</span> <span class="n">svNumber</span>  <span class="o">::</span> <span class="o">!</span><span class="kt">NumSoftwareVersion</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Length of application name (should be &lt;= 10)</td>
    </tr>
    <tr>
      <td>n</td>
      <td>Word8[n]</td>
      <td> </td>
      <td><code class="highlighter-rouge">svAppName</code>: UTF8 encoded application name</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Word32</td>
      <td> </td>
      <td><code class="highlighter-rouge">svNumber</code></td>
    </tr>
  </tbody>
</table>

<h3 id="mainblockheader">MainBlockHeader</h3>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>4</td>
      <td>Word32</td>
      <td>Protocol magic</td>
    </tr>
    <tr>
      <td>32</td>
      <td>HeaderHash</td>
      <td>Previous block hash</td>
    </tr>
    <tr>
      <td>size(MainProof)</td>
      <td>MainProof</td>
      <td>Body proof</td>
    </tr>
    <tr>
      <td>size(MainConsensusData)</td>
      <td>MainConsensusData</td>
      <td>Consensus data</td>
    </tr>
    <tr>
      <td>size(MainExtraHeaderData)</td>
      <td>MainExtraHeaderData</td>
      <td>MainExtraHeaderData</td>
    </tr>
  </tbody>
</table>

<h4 id="mainproof">MainProof</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Proof of transactions list and MPC data.</span>
    <span class="kr">data</span> <span class="kt">BodyProof</span> <span class="p">(</span><span class="kt">MainBlockchain</span> <span class="n">ssc</span><span class="p">)</span> <span class="o">=</span> <span class="kt">MainProof</span>
        <span class="p">{</span> <span class="n">mpNumber</span>        <span class="o">::</span> <span class="o">!</span><span class="kt">Word32</span>
        <span class="p">,</span> <span class="n">mpRoot</span>          <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">MerkleRoot</span> <span class="kt">Tx</span><span class="p">)</span>
        <span class="p">,</span> <span class="n">mpWitnessesHash</span> <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="p">[</span><span class="kt">TxWitness</span><span class="p">])</span>
        <span class="p">,</span> <span class="n">mpMpcProof</span>      <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">SscProof</span> <span class="n">ssc</span><span class="p">)</span>
        <span class="p">,</span> <span class="n">mpProxySKsProof</span> <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="p">[</span><span class="kt">ProxySKSimple</span><span class="p">])</span>
        <span class="p">,</span> <span class="n">mpUpdateProof</span>   <span class="o">::</span> <span class="o">!</span><span class="kt">UpdateProof</span>
        <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-5</td>
      <td>UVarInt Word32</td>
      <td>mpNumber</td>
    </tr>
    <tr>
      <td>size(MerkleRoot)</td>
      <td>MerkleRoot Tx</td>
      <td>mpRoot</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash [TxWitness]</td>
      <td>mpWitnessesHash</td>
    </tr>
    <tr>
      <td>size(GtProof)</td>
      <td>GtProof</td>
      <td>mpMpcProof</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash [ProxySKSimple]</td>
      <td>mpProxySKsProof</td>
    </tr>
    <tr>
      <td>32</td>
      <td>UpdateProof</td>
      <td>mpUpdateProof</td>
    </tr>
  </tbody>
</table>

<h4 id="mainconsensusdata">MainConsensusData</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">ConsensusData</span> <span class="p">(</span><span class="kt">MainBlockchain</span> <span class="n">ssc</span><span class="p">)</span> <span class="o">=</span> <span class="kt">MainConsensusData</span>
        <span class="p">{</span> <span class="c1">-- | Id of the slot for which this block was generated.</span>
        <span class="n">_mcdSlot</span>       <span class="o">::</span> <span class="o">!</span><span class="kt">SlotId</span>
        <span class="p">,</span> <span class="c1">-- | Public key of slot leader. Maybe later we'll see it is redundant.</span>
        <span class="n">_mcdLeaderKey</span>  <span class="o">::</span> <span class="o">!</span><span class="kt">PublicKey</span>
        <span class="p">,</span> <span class="c1">-- | Difficulty of chain ending in this block.</span>
        <span class="n">_mcdDifficulty</span> <span class="o">::</span> <span class="o">!</span><span class="kt">ChainDifficulty</span>
        <span class="p">,</span> <span class="c1">-- | Signature given by slot leader.</span>
        <span class="n">_mcdSignature</span>  <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">BlockSignature</span> <span class="n">ssc</span><span class="p">)</span>
        <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(SlotId)</td>
      <td>SlotId</td>
      <td>mcdSlot</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>mcdLeaderKey</td>
    </tr>
    <tr>
      <td>1-10</td>
      <td>ChainDifficulty</td>
      <td>mcdDifficulty</td>
    </tr>
    <tr>
      <td>64</td>
      <td>BlockSignature</td>
      <td>mcdSignature</td>
    </tr>
  </tbody>
</table>

<h4 id="mainextraheaderdata">MainExtraHeaderData</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Represents main block header extra data</span>
<span class="kr">data</span> <span class="kt">MainExtraHeaderData</span> <span class="o">=</span> <span class="kt">MainExtraHeaderData</span>
    <span class="p">{</span> <span class="c1">-- | Version of block.</span>
      <span class="n">_mehBlockVersion</span>    <span class="o">::</span> <span class="o">!</span><span class="kt">BlockVersion</span>
    <span class="p">,</span> <span class="c1">-- | Software version.</span>
      <span class="n">_mehSoftwareVersion</span> <span class="o">::</span> <span class="o">!</span><span class="kt">SoftwareVersion</span>
    <span class="p">,</span> <span class="c1">-- | Header attributes</span>
      <span class="n">_mehAttributes</span>      <span class="o">::</span> <span class="o">!</span><span class="kt">BlockHeaderAttributes</span>
    <span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>

<span class="cd">-- | Represents main block header attributes: map from 1-byte integer to</span>
<span class="c1">-- arbitrary-type value. To be used for extending header with new</span>
<span class="c1">-- fields via softfork.</span>
<span class="kr">type</span> <span class="kt">BlockHeaderAttributes</span> <span class="o">=</span> <span class="kt">Attributes</span> <span class="nb">()</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(BlockVersion)</td>
      <td>BlockVersion</td>
      <td>Version of block</td>
    </tr>
    <tr>
      <td>size(SoftwareVersion)</td>
      <td>SoftwareVersion</td>
      <td>Software version</td>
    </tr>
    <tr>
      <td>size(BlockHeaderAttributes)</td>
      <td>BlockHeaderAttributes</td>
      <td>Header attributes (used for extending header with new fields via softfork)</td>
    </tr>
  </tbody>
</table>

<h3 id="genesisblockheader">GenesisBlockHeader</h3>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>4</td>
      <td>Word32</td>
      <td>Protocol magic</td>
    </tr>
    <tr>
      <td>32</td>
      <td>HeaderHash</td>
      <td>Previous block hash</td>
    </tr>
    <tr>
      <td>size(GenesisProof)</td>
      <td>GenesisProof</td>
      <td>Body proof</td>
    </tr>
    <tr>
      <td>size(GenesisConsensusData)</td>
      <td>GenesisConsensusData</td>
      <td>Consensus data</td>
    </tr>
  </tbody>
</table>

<h4 id="genesisproof">GenesisProof</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Proof of GenesisBody is just a hash of slot leaders list.</span>
    <span class="kr">data</span> <span class="kt">BodyProof</span> <span class="p">(</span><span class="kt">GenesisBlockchain</span> <span class="n">ssc</span><span class="p">)</span> <span class="o">=</span> <span class="kt">GenesisProof</span>
        <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">SlotLeaders</span><span class="p">)</span>
        <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Hash SlotLeaders</td>
      <td>Hash of slot leaders list</td>
    </tr>
  </tbody>
</table>

<h4 id="genesisconsensusdata">GenesisConsensusData</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">ConsensusData</span> <span class="p">(</span><span class="kt">GenesisBlockchain</span> <span class="n">ssc</span><span class="p">)</span> <span class="o">=</span> <span class="kt">GenesisConsensusData</span>
        <span class="p">{</span> <span class="c1">-- | Index of the slot for which this genesis block is relevant.</span>
          <span class="n">_gcdEpoch</span> <span class="o">::</span> <span class="o">!</span><span class="kt">EpochIndex</span>
        <span class="p">,</span> <span class="c1">-- | Difficulty of the chain ending in this genesis block.</span>
          <span class="n">_gcdDifficulty</span> <span class="o">::</span> <span class="o">!</span><span class="kt">ChainDifficulty</span>
        <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>EpochIndex</td>
      <td>Index of epoch for which this genesis block is relevant</td>
    </tr>
    <tr>
      <td>1-10</td>
      <td>ChainDifficulty</td>
      <td>Difficulty of the chain ending in this genesis block.</td>
    </tr>
  </tbody>
</table>

<h3 id="blockheader">BlockHeader</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Either header of ordinary main block or genesis block.</span>
<span class="kr">type</span> <span class="kt">BlockHeader</span> <span class="n">ssc</span> <span class="o">=</span> <span class="kt">Either</span> <span class="p">(</span><span class="kt">GenesisBlockHeader</span> <span class="n">ssc</span><span class="p">)</span> <span class="p">(</span><span class="kt">MainBlockHeader</span> <span class="n">ssc</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Tag size</th>
      <th>Tag Type</th>
      <th>Tag Value</th>
      <th>Description</th>
      <th>Field size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td>Tag for <code class="highlighter-rouge">GenesisBlockHeader</code></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(GenesisBlockHeader)</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x01</td>
      <td>Tag for <code class="highlighter-rouge">MainBlockHeader</code></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(MainBlockHeader)</td>
    </tr>
  </tbody>
</table>

<h2 id="block-exchange-messages">Block Exchange Messages</h2>

<h3 id="headerhash">HeaderHash</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | 'Hash' of block header. This should be @Hash (BlockHeader ssc)@</span>
<span class="c1">-- but there is no @ssc@ in HeaderHash type.</span>
<span class="kr">type</span> <span class="kt">HeaderHash</span> <span class="o">=</span> <span class="kt">Hash</span> <span class="kt">BlockHeaderStub</span>
<span class="kr">data</span> <span class="kt">BlockHeaderStub</span>
</code></pre>
</div>

<h3 id="getheaders">GetHeaders</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | 'GetHeaders' message. Behaviour of the response depends on</span>
<span class="c1">-- particular combination of 'mghFrom' and 'mghTo'.</span>
<span class="c1">--</span>
<span class="c1">-- * 'mghTo' resolves to some header (let's call it @top@ for</span>
<span class="c1">-- convenience) -- node's tip if it's @Nothing@, header with hash in</span>
<span class="c1">-- @Just@ if it's @Just@.</span>
<span class="c1">--</span>
<span class="c1">-- * If 'mghFrom' is empty, then semantics is "request to return</span>
<span class="c1">-- header of block @top@".</span>
<span class="c1">--</span>
<span class="c1">-- * Otherwise (if 'mghFrom' isn't empty) it represents the set of</span>
<span class="c1">-- checkpoints. Responding node will try to iterate headers from @top@</span>
<span class="c1">-- to older until it reaches any checkpoint. If it finds checkpoint</span>
<span class="c1">-- @c@, it returns all headers in range @[c.next..top]@. If it doesn't</span>
<span class="c1">-- find any checkpoint or depth of searching exceeds</span>
<span class="c1">-- 'recoveryHeadersMessage', it will try to find the newest checkpoint</span>
<span class="c1">-- @cc@ from 'mghFrom' that's in main chain of responding node and</span>
<span class="c1">-- then return at most 'recoveryHeadersMessage' headers starting with</span>
<span class="c1">-- @cc@ as the oldest one, returning headers in range @l2 =</span>
<span class="c1">-- [cc.next..x]@ where @x@ is either @top@ (in case @length l2 &lt;</span>
<span class="c1">-- recoveryHeadersMessage@) or some arbitrary header (and length is</span>
<span class="c1">-- precisely 'recoveryHeadersMessage').</span>
<span class="kr">data</span> <span class="kt">MsgGetHeaders</span> <span class="o">=</span> <span class="kt">MsgGetHeaders</span>
    <span class="p">{</span> <span class="c1">-- not guaranteed to be in any particular order</span>
      <span class="n">mghFrom</span> <span class="o">::</span> <span class="o">!</span><span class="p">[</span><span class="kt">HeaderHash</span><span class="p">]</span>
    <span class="p">,</span> <span class="n">mghTo</span>   <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Maybe</span> <span class="kt">HeaderHash</span><span class="p">)</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Number of checkpoints</td>
    </tr>
    <tr>
      <td>n * size(Hash)</td>
      <td>Hash[n]</td>
      <td> </td>
      <td>List of length <code class="highlighter-rouge">n</code> with hashes</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>tag = 0x00 or 0x01</td>
      <td>Tag for optional <code class="highlighter-rouge">to</code> hash</td>
    </tr>
    <tr>
      <td>tag * size(Hash)</td>
      <td>Hash</td>
      <td> </td>
      <td>If tag is not <code class="highlighter-rouge">0x00</code> then hash of <code class="highlighter-rouge">to</code> block</td>
    </tr>
  </tbody>
</table>

<h3 id="getblocks">GetBlocks</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | 'GetBlocks' message (see protocol specification).</span>
<span class="kr">data</span> <span class="kt">MsgGetBlocks</span> <span class="o">=</span> <span class="kt">MsgGetBlocks</span>
    <span class="p">{</span> <span class="n">mgbFrom</span> <span class="o">::</span> <span class="o">!</span><span class="kt">HeaderHash</span>
    <span class="p">,</span> <span class="n">mgbTo</span>   <span class="o">::</span> <span class="o">!</span><span class="kt">HeaderHash</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Hash)</td>
      <td>Hash</td>
      <td><code class="highlighter-rouge">mgbFrom</code></td>
    </tr>
    <tr>
      <td>size(Hash)</td>
      <td>Hash</td>
      <td><code class="highlighter-rouge">mgbTo</code></td>
    </tr>
  </tbody>
</table>

<h3 id="headers">Headers</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | 'Headers' message (see protocol specification).</span>
<span class="kr">newtype</span> <span class="kt">MsgHeaders</span> <span class="n">ssc</span> <span class="o">=</span>
    <span class="kt">MsgHeaders</span> <span class="p">(</span><span class="kt">NewestFirst</span> <span class="kt">NE</span> <span class="p">(</span><span class="kt">BlockHeader</span> <span class="n">ssc</span><span class="p">))</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Number of block headers</td>
    </tr>
    <tr>
      <td>n * size(BlockHeader)</td>
      <td>BlockHeader[n]</td>
      <td> </td>
      <td><code class="highlighter-rouge">n</code> block headers</td>
    </tr>
  </tbody>
</table>

<h3 id="block">Block</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | 'Block' message (see protocol specification).</span>
<span class="kr">newtype</span> <span class="kt">MsgBlock</span> <span class="n">ssc</span> <span class="o">=</span>
    <span class="kt">MsgBlock</span> <span class="p">(</span><span class="kt">Block</span> <span class="n">ssc</span><span class="p">)</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int64</td>
      <td>n</td>
      <td>Size of <code class="highlighter-rouge">Block</code> in bytes</td>
    </tr>
    <tr>
      <td>size(Block)</td>
      <td>Block</td>
      <td> </td>
      <td><code class="highlighter-rouge">Block</code> with size of <code class="highlighter-rouge">n</code> bytes</td>
    </tr>
  </tbody>
</table>

<p>Contains one <code class="highlighter-rouge">Block</code>. We encode block size and then the block itself so that we’d be able to
reject the block if it’s of the wrong size without consuming the whole block.</p>

<h2 id="transaction-sending">Transaction sending</h2>

<p>To send transaction you need to create and send <code class="highlighter-rouge">TxAux</code> data type to node. All data types
required to successfully perform sending are described in this section.</p>

<h3 id="transaction-input">Transaction input</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Represents transaction identifier as 'Hash' of 'Tx'.</span>
<span class="kr">type</span> <span class="kt">TxId</span> <span class="o">=</span> <span class="kt">Hash</span> <span class="kt">Tx</span>

<span class="cd">-- | Transaction input.</span>
<span class="kr">data</span> <span class="kt">TxIn</span> <span class="o">=</span> <span class="kt">TxIn</span>
    <span class="p">{</span> <span class="c1">-- | Which transaction's output is used</span>
      <span class="n">txInHash</span>  <span class="o">::</span> <span class="o">!</span><span class="kt">TxId</span>
      <span class="c1">-- | Index of the output in transaction's outputs</span>
    <span class="p">,</span> <span class="n">txInIndex</span> <span class="o">::</span> <span class="o">!</span><span class="kt">Word32</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Field name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>txOutAddress</td>
    </tr>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word32</td>
      <td>txOutValue</td>
    </tr>
  </tbody>
</table>

<h3 id="transaction-output">Transaction output</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Transaction output.</span>
<span class="kr">data</span> <span class="kt">TxOut</span> <span class="o">=</span> <span class="kt">TxOut</span>
    <span class="p">{</span> <span class="n">txOutAddress</span> <span class="o">::</span> <span class="o">!</span><span class="kt">Address</span>
    <span class="p">,</span> <span class="n">txOutValue</span>   <span class="o">::</span> <span class="o">!</span><span class="kt">Coin</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Field name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Address)</td>
      <td>Address</td>
      <td>txOutAddress</td>
    </tr>
    <tr>
      <td>size(Coin)</td>
      <td>Coin</td>
      <td>txOutValue</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; let addr = PubKeyAddress (abstractHash somePk) (Attributes (AddrPkAttrs Nothing) "a")
ghci&gt; hexEncode addr
"001e380dea393a631ad563154a13bc5ee49fa4b62a60218358b5dcb875e00161cf52c5ec"
ghci&gt; hexEncode $ TxOut addr (mkCoin 1000)
"001e380dea393a631ad563154a13bc5ee49fa4b62a60218358b5dcb875e00161cf52c5ec0064"
</code></pre>
</div>

<h3 id="transaction-output-auxilary">Transaction output auxilary</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Transaction output auxilary data</span>
<span class="kr">type</span> <span class="kt">TxOutAux</span> <span class="o">=</span> <span class="p">(</span><span class="kt">TxOut</span><span class="p">,</span> <span class="p">[(</span><span class="kt">StakeholderId</span><span class="p">,</span> <span class="kt">Coin</span><span class="p">)])</span>
</code></pre>
</div>

<p>Lets define <code class="highlighter-rouge">distr_size(n) = n * (size(Hash) + size(Coin))</code>.</p>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(TxOut)</td>
      <td>TxOut</td>
      <td> </td>
      <td>Transaction output</td>
    </tr>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Length of list for output auxilary data</td>
    </tr>
    <tr>
      <td>distr_size(n)</td>
      <td>&lt;Hash,Coin&gt;[n]</td>
      <td> </td>
      <td>Array of pairs for StakeholderId and Coin</td>
    </tr>
  </tbody>
</table>

<h3 id="transaction-signature-data">Transaction signature data</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code>
<span class="cd">-- | Data that is being signed when creating a TxSig.</span>
<span class="kr">type</span> <span class="kt">TxSigData</span> <span class="o">=</span> <span class="p">(</span><span class="kt">TxId</span><span class="p">,</span> <span class="kt">Word32</span><span class="p">,</span> <span class="kt">Hash</span> <span class="p">[</span><span class="kt">TxOut</span><span class="p">],</span> <span class="kt">Hash</span> <span class="kt">TxDistribution</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>Signature of transaction</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Word32</td>
      <td>Index of the output in transaction’s outputs (see <code class="highlighter-rouge">txInIndex</code> in <code class="highlighter-rouge">TxIn</code>)</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>Hash of list of transaction outputs</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>Hash of transaction distribution</td>
    </tr>
  </tbody>
</table>

<h3 id="transaction-witness">Transaction witness</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | 'Signature' of addrId.</span>
<span class="kr">type</span> <span class="kt">TxSig</span> <span class="o">=</span> <span class="kt">Signature</span> <span class="kt">TxSigData</span>

<span class="cd">-- | A witness for a single input.</span>
<span class="kr">data</span> <span class="kt">TxInWitness</span>
    <span class="o">=</span> <span class="kt">PkWitness</span> <span class="p">{</span> <span class="n">twKey</span> <span class="o">::</span> <span class="kt">PublicKey</span>
                <span class="p">,</span> <span class="n">twSig</span> <span class="o">::</span> <span class="kt">TxSig</span><span class="p">}</span>
    <span class="o">|</span> <span class="kt">ScriptWitness</span> <span class="p">{</span> <span class="n">twValidator</span> <span class="o">::</span> <span class="kt">Script</span>
                    <span class="p">,</span> <span class="n">twRedeemer</span>  <span class="o">::</span> <span class="kt">Script</span><span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>

<span class="cd">-- | A witness is a proof that a transaction is allowed to spend the funds it</span>
<span class="c1">-- spends (by providing signatures, redeeming scripts, etc). A separate proof</span>
<span class="c1">-- is provided for each input.</span>
<span class="kr">type</span> <span class="kt">TxWitness</span> <span class="o">=</span> <span class="kt">Vector</span> <span class="kt">TxInWitness</span>
</code></pre>
</div>

<p>Table for <code class="highlighter-rouge">TxInWitness</code>:</p>

<table>
  <thead>
    <tr>
      <th>Tag size</th>
      <th>Tag Type</th>
      <th>Tag Value</th>
      <th>Description</th>
      <th>Field size</th>
      <th>Field Type</th>
      <th>Field name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td>Tag for PkWitness</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>32</td>
      <td>PublicKey</td>
      <td>twKey</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>64</td>
      <td>TxSig</td>
      <td>twSig</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x01</td>
      <td>Tag for ScriptWitness</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(Script)</td>
      <td>Script</td>
      <td>twValidator</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(Script)</td>
      <td>Script</td>
      <td>twRedeemer</td>
    </tr>
  </tbody>
</table>

<h3 id="transaction">Transaction</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Transaction.</span>
<span class="c1">--</span>
<span class="c1">-- NB: transaction witnesses are stored separately.</span>
<span class="kr">data</span> <span class="kt">Tx</span> <span class="o">=</span> <span class="kt">Tx</span>
    <span class="p">{</span> <span class="n">txInputs</span>     <span class="o">::</span> <span class="o">!</span><span class="p">[</span><span class="kt">TxIn</span><span class="p">]</span>   <span class="c1">-- ^ Inputs of transaction.</span>
    <span class="p">,</span> <span class="n">txOutputs</span>    <span class="o">::</span> <span class="o">!</span><span class="p">[</span><span class="kt">TxOut</span><span class="p">]</span>  <span class="c1">-- ^ Outputs of transaction.</span>
    <span class="p">,</span> <span class="n">txAttributes</span> <span class="o">::</span> <span class="o">!</span><span class="kt">TxAttributes</span> <span class="c1">-- ^ Attributes of transaction</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td>Number of transaction inputs</td>
    </tr>
    <tr>
      <td>n * size(TxIn)</td>
      <td>TxIn[n]</td>
      <td> </td>
      <td>Array of transaction inputs</td>
    </tr>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>m</td>
      <td>Number of transaction outputs</td>
    </tr>
    <tr>
      <td>m * size(TxOut)</td>
      <td>TxOut[m]</td>
      <td> </td>
      <td>Array of transaction outputs</td>
    </tr>
    <tr>
      <td>size(TxAttributes)</td>
      <td>TxAttributes</td>
      <td> </td>
      <td>Attributes for transaction</td>
    </tr>
  </tbody>
</table>

<h3 id="transaction-distribution">Transaction distribution</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Distribution of “fake” stake that follow-the-satoshi would use for a</span>
<span class="c1">-- particular transaction.</span>
<span class="kr">newtype</span> <span class="kt">TxDistribution</span> <span class="o">=</span> <span class="kt">TxDistribution</span> <span class="p">{</span>
    <span class="n">getTxDistribution</span> <span class="o">::</span> <span class="p">[[(</span><span class="kt">StakeholderId</span><span class="p">,</span> <span class="kt">Coin</span><span class="p">)]]</span> <span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<p>Though transaction distribution can be stored as list of list using previous serialization
strategy it is often happens that we pass list of empty lists. In that case we store such
lists more efficiently.</p>

<table>
  <thead>
    <tr>
      <th>Tag size</th>
      <th>Tag Type</th>
      <th>Tag Value</th>
      <th>Description</th>
      <th>Field size</th>
      <th>Field Type</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td>List of empty lists</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x01</td>
      <td>Some lists are not empty</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>distr_size(n)</td>
      <td>&lt;Hash,Coin&gt;[n]</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="transaction-auxilary">Transaction auxilary</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Transaction + auxiliary data</span>
<span class="kr">type</span> <span class="kt">TxAux</span> <span class="o">=</span> <span class="p">(</span><span class="kt">Tx</span><span class="p">,</span> <span class="kt">TxWitness</span><span class="p">,</span> <span class="kt">TxDistribution</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(Tx)</td>
      <td>Tx</td>
      <td>Transaction itself</td>
    </tr>
    <tr>
      <td>size(TxWitness)</td>
      <td>TxWitness</td>
      <td>Witness for transaction</td>
    </tr>
    <tr>
      <td>size(TxDistribution)</td>
      <td>TxDistribution</td>
      <td>Transaction distribution</td>
    </tr>
  </tbody>
</table>

<h2 id="delegation">Delegation</h2>

<p>Description of <em>Delegation</em> process can be found in CSL-application chapter. Here you can find
description of message formats only.</p>

<h3 id="proxy-certificate">Proxy Certificate</h3>

<p>Similar to <code class="highlighter-rouge">Signature</code>.</p>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Proxy certificate, made of ω + public key of delegate.</span>
<span class="kr">newtype</span> <span class="kt">ProxyCert</span> <span class="n">w</span> <span class="o">=</span> <span class="kt">ProxyCert</span> <span class="p">{</span> <span class="n">unProxyCert</span> <span class="o">::</span> <span class="kt">Ed25519</span><span class="o">.</span><span class="kt">Signature</span> <span class="p">}</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">NFData</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>64</td>
      <td>Word8[64]</td>
      <td><code class="highlighter-rouge">unProxyCert</code>: 64 bytes of signature string</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; (issuerPk, issuerSk) &lt;- keyGen
ghci&gt; hexEncode issuerPk
"0659c8e27599dc4709dab3bb58ce50d0729150fc238010fd3a68dcf07c621bdc"
ghci&gt; (delegatePk, delegateSk) &lt;- keyGen
ghci&gt; hexEncode delegatePk
"5eaf0944733da8386c427656a876b20ae411fa686ea4bb165b53a311c868c287"
ghci&gt; let cert = createProxyCert issuerSk delegatePk (0, 10) :: ProxyCert (EpochIndex, EpochIndex)
ghci&gt; hexEncode cert
"8db543c5fff7dd5dab609d04a834cda77958faf48cabee351def8985a2ec7dae71c7b2f0390caa54c61c9d41f5228e1a0b5da1c08638b99d03a1c02c81cb1607"
ghci&gt; verifyProxyCert issuerPk delegatePk (0, 10) cert
True
</code></pre>
</div>

<h3 id="proxy-secret-key">Proxy Secret Key</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Convenient wrapper for secret key, that's basically ω + certificate.</span>
<span class="kr">data</span> <span class="kt">ProxySecretKey</span> <span class="n">w</span> <span class="o">=</span> <span class="kt">ProxySecretKey</span>
    <span class="p">{</span> <span class="n">pskOmega</span>      <span class="o">::</span> <span class="n">w</span>
    <span class="p">,</span> <span class="n">pskIssuerPk</span>   <span class="o">::</span> <span class="kt">PublicKey</span>
    <span class="p">,</span> <span class="n">pskDelegatePk</span> <span class="o">::</span> <span class="kt">PublicKey</span>
    <span class="p">,</span> <span class="n">pskCert</span>       <span class="o">::</span> <span class="kt">ProxyCert</span> <span class="n">w</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(w)</td>
      <td>w</td>
      <td>pskOmega</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pskIssuerPk</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pskDelegatePk</td>
    </tr>
    <tr>
      <td>64</td>
      <td>ProxyCert w</td>
      <td>pskCert</td>
    </tr>
  </tbody>
</table>

<h3 id="proxy-signature">Proxy signature</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Delegate signature made with certificate-based permission. @a@</span>
<span class="c1">-- stays for message type used in proxy (ω in the implementation</span>
<span class="c1">-- notes).</span>
<span class="kr">data</span> <span class="kt">ProxySignature</span> <span class="n">w</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">ProxySignature</span>
    <span class="p">{</span> <span class="n">pdOmega</span>      <span class="o">::</span> <span class="n">w</span>
    <span class="p">,</span> <span class="n">pdDelegatePk</span> <span class="o">::</span> <span class="kt">PublicKey</span>
    <span class="p">,</span> <span class="n">pdCert</span>       <span class="o">::</span> <span class="kt">ProxyCert</span> <span class="n">w</span>
    <span class="p">,</span> <span class="n">pdSig</span>        <span class="o">::</span> <span class="kt">Ed25519</span><span class="o">.</span><span class="kt">Signature</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(w)</td>
      <td>w</td>
      <td>pdOmega</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pdDelegatePk</td>
    </tr>
    <tr>
      <td>64</td>
      <td>ProxyCert w</td>
      <td>pdCert</td>
    </tr>
    <tr>
      <td>64</td>
      <td>Signature</td>
      <td>pdSig</td>
    </tr>
  </tbody>
</table>

<h3 id="proxy-secret-key-and-signature-for-lightweight-delegation">Proxy Secret Key and Signature for Lightweight Delegation</h3>

<h4 id="secret-key">Secret Key</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Same alias for the proxy secret key (see 'ProxySigLight').</span>
<span class="kr">type</span> <span class="kt">ProxySKLight</span> <span class="o">=</span> <span class="kt">ProxySecretKey</span> <span class="p">(</span><span class="kt">EpochIndex</span><span class="p">,</span> <span class="kt">EpochIndex</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>from epoch</td>
    </tr>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>to epoch</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pskIssuerPk</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pskDelegatePk</td>
    </tr>
    <tr>
      <td>64</td>
      <td>ProxyCert (EpochIndex, EpochIndex)</td>
      <td>pskCert</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; let proxySk = createProxySecretKey issuerSk delegatePk (0, 10) :: ProxySKLight
ghci&gt; hexEncode proxySk
"000a0659c8e27599dc4709dab3bb58ce50d0729150fc238010fd3a68dcf07c621bdc5eaf0944733da8386
c427656a876b20ae411fa686ea4bb165b53a311c868c2878db543c5fff7dd5dab609d04a834cda77958faf
48cabee351def8985a2ec7dae71c7b2f0390caa54c61c9d41f5228e1a0b5da1c08638b99d03a1c02c81cb1607"
ghci&gt; verifyProxySecretKey proxySk
True
</code></pre>
</div>

<h4 id="signature-1">Signature</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Proxy signature used in csl -- holds a pair of epoch</span>
<span class="c1">-- indices. Block is valid if it's epoch index is inside this range.</span>
<span class="kr">type</span> <span class="kt">ProxySigLight</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">ProxySignature</span> <span class="p">(</span><span class="kt">EpochIndex</span><span class="p">,</span> <span class="kt">EpochIndex</span><span class="p">)</span> <span class="n">a</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>from epoch</td>
    </tr>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>to epoch</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pdDelegatePk</td>
    </tr>
    <tr>
      <td>64</td>
      <td>ProxyCert (EpochIndex, EpochIndex)</td>
      <td>pdCert</td>
    </tr>
    <tr>
      <td>64</td>
      <td>Signature</td>
      <td>pdSig</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; let proxyLightSig = proxySign delegateSk proxySk proxySk :: ProxySigLight ProxySKLight
ghci&gt; hexEncode proxyLightSig
"000a5eaf0944733da8386c427656a876b20ae411fa686ea4bb165b53a311c868c2878db543c5fff7dd5dab609d04a
834cda77958faf48cabee351def8985a2ec7dae71c7b2f0390caa54c61c9d41f5228e1a0b5da1c08638b99d03a1c02
c81cb1607e764468529599312ebe4dd5587383e5ccd3c2755401b22c8ff08827ecabd1afc8c634e17085ec83179193
afad2868e6aabce3e3e46e3170d077ee4e8613aa700"
ghci&gt; proxyVerify issuerPk proxyLightSig (== (0, 10)) proxySk
True
</code></pre>
</div>

<h3 id="proxy-secret-key-and-signature-for-heavyweight-delegation">Proxy Secret Key and Signature for Heavyweight Delegation</h3>

<h4 id="secret-key-1">Secret Key</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Correspondent SK for no-ttl proxy signature scheme.</span>
<span class="kr">type</span> <span class="kt">ProxySKHeavy</span> <span class="o">=</span> <span class="kt">ProxySecretKey</span> <span class="kt">EpochIndex</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>epoch</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pskIssuerPk</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pskDelegatePk</td>
    </tr>
    <tr>
      <td>64</td>
      <td>ProxyCert EpochIndex</td>
      <td>pskCert</td>
    </tr>
  </tbody>
</table>

<h4 id="signature-2">Signature</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Simple proxy signature without ttl/epoch index</span>
<span class="c1">-- constraints. 'EpochIndex' inside is needed for replay attack</span>
<span class="c1">-- prevention.</span>
<span class="kr">type</span> <span class="kt">ProxySigHeavy</span> <span class="n">a</span> <span class="o">=</span> <span class="kt">ProxySignature</span> <span class="kt">EpochIndex</span> <span class="n">a</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-10</td>
      <td>UVarInt Word64</td>
      <td>epoch</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>pdDelegatePk</td>
    </tr>
    <tr>
      <td>64</td>
      <td>ProxyCert EpochIndex</td>
      <td>pdCert</td>
    </tr>
    <tr>
      <td>64</td>
      <td>Signature</td>
      <td>pdSig</td>
    </tr>
  </tbody>
</table>

<h3 id="proxy-delegation-start-message">Proxy Delegation Start Message</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Message with delegated proxy secret key. Is used to propagate</span>
<span class="c1">-- both epoch-oriented psks (lightweight) and simple (heavyweight).</span>
<span class="kr">data</span> <span class="kt">SendProxySK</span>
    <span class="o">=</span> <span class="kt">SendProxySKLight</span> <span class="o">!</span><span class="kt">ProxySKLight</span>
    <span class="o">|</span> <span class="kt">SendProxySKHeavy</span> <span class="o">!</span><span class="kt">ProxySKHeavy</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Tag size</th>
      <th>Tag Type</th>
      <th>Tag Value</th>
      <th>Description</th>
      <th>Field size</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Word8</td>
      <td>0x00</td>
      <td>Tag for SendProxySKLight</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(ProxySKLight)</td>
      <td>lightweight</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>0x01</td>
      <td>Tag for SendProxySKHeavy</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>size(ProxySKHeavy)</td>
      <td>heavyweight</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ghci&gt; hexEncode (SendProxySKLight proxySk)
"00000a0659c8e27599dc4709dab3bb58ce50d0729150fc238010fd3a68dcf07c621bdc5eaf0944733da
8386c427656a876b20ae411fa686ea4bb165b53a311c868c2878db543c5fff7dd5dab609d04a834cda77
958faf48cabee351def8985a2ec7dae71c7b2f0390caa54c61c9d41f5228e1a0b5da1c08638b99d03a1c02c81cb1607"
</code></pre>
</div>

<h3 id="lightweight-delegation-confirmation">Lightweight Delegation Confirmation</h3>

<h4 id="confirmproxysk">ConfirmProxySK</h4>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Confirmation of proxy signature delivery. Delegate should take</span>
<span class="c1">-- the proxy signing key he has and sign this key with itself. If the</span>
<span class="c1">-- signature is correct, then it was done by delegate (guaranteed by</span>
<span class="c1">-- PSK scheme). Checking @w@ can be done with @(const True)@</span>
<span class="c1">-- predicate, because certificate may be sent in epoch id that's</span>
<span class="c1">-- before lower cert's @EpochIndex@.</span>
<span class="kr">data</span> <span class="kt">ConfirmProxySK</span> <span class="o">=</span>
    <span class="kt">ConfirmProxySK</span> <span class="o">!</span><span class="kt">ProxySKLight</span> <span class="o">!</span><span class="p">(</span><span class="kt">ProxySigLight</span> <span class="kt">ProxySKLight</span><span class="p">)</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size(ProxySKLight)</td>
      <td>certificate</td>
    </tr>
    <tr>
      <td>size(ProxySigLight)</td>
      <td>proof for certificate</td>
    </tr>
  </tbody>
</table>

<h2 id="update-system">Update System</h2>

<h3 id="update-vote">Update Vote</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | ID of softwaree update proposal</span>
<span class="kr">type</span> <span class="kt">UpId</span> <span class="o">=</span> <span class="kt">Hash</span> <span class="kt">UpdateProposal</span>

<span class="cd">-- | Vote for update proposal</span>
<span class="kr">data</span> <span class="kt">UpdateVote</span> <span class="o">=</span> <span class="kt">UpdateVote</span>
    <span class="p">{</span> <span class="c1">-- | Public key of stakeholder, who votes</span>
      <span class="n">uvKey</span>        <span class="o">::</span> <span class="o">!</span><span class="kt">PublicKey</span>
    <span class="p">,</span> <span class="c1">-- | Proposal to which this vote applies</span>
      <span class="n">uvProposalId</span> <span class="o">::</span> <span class="o">!</span><span class="kt">UpId</span>
    <span class="p">,</span> <span class="c1">-- | Approval/rejection bit</span>
      <span class="n">uvDecision</span>   <span class="o">::</span> <span class="o">!</span><span class="kt">Bool</span>
    <span class="p">,</span> <span class="c1">-- | Signature of (Update proposal, Approval/rejection bit)</span>
      <span class="c1">--   by stakeholder</span>
      <span class="n">uvSignature</span>  <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Signature</span> <span class="p">(</span><span class="kt">UpId</span><span class="p">,</span> <span class="kt">Bool</span><span class="p">))</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>uvKey</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>uvProposalId</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Bool</td>
      <td>uvDecision</td>
    </tr>
    <tr>
      <td>64</td>
      <td>Signature</td>
      <td>uvSignature</td>
    </tr>
  </tbody>
</table>

<h3 id="vote-identifier">Vote Identifier</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">type</span> <span class="kt">VoteId</span> <span class="o">=</span> <span class="p">(</span><span class="kt">UpId</span><span class="p">,</span> <span class="kt">PublicKey</span><span class="p">,</span> <span class="kt">Bool</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>hash of update proposal</td>
    </tr>
    <tr>
      <td>32</td>
      <td>PublicKey</td>
      <td>public key</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Bool</td>
      <td>vote result</td>
    </tr>
  </tbody>
</table>

<p>For more description of fields, see <em>UpdateVote</em> message description. <code class="highlighter-rouge">VoteId</code> is
just <code class="highlighter-rouge">(uvProposalId, uvKey, uvDecision)</code>.</p>

<h3 id="block-version-data">Block Version Data</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Data which is associated with 'BlockVersion'.</span>
<span class="kr">data</span> <span class="kt">BlockVersionData</span> <span class="o">=</span> <span class="kt">BlockVersionData</span>
    <span class="p">{</span> <span class="n">bvdScriptVersion</span>     <span class="o">::</span> <span class="o">!</span><span class="kt">ScriptVersion</span>
    <span class="p">,</span> <span class="n">bvdSlotDuration</span>      <span class="o">::</span> <span class="o">!</span><span class="kt">Millisecond</span>
    <span class="p">,</span> <span class="n">bvdMaxBlockSize</span>      <span class="o">::</span> <span class="o">!</span><span class="kt">Byte</span>
    <span class="p">,</span> <span class="n">bvdMaxTxSize</span>         <span class="o">::</span> <span class="o">!</span><span class="kt">Byte</span>
    <span class="p">,</span> <span class="n">bvdMpcThd</span>            <span class="o">::</span> <span class="o">!</span><span class="kt">CoinPortion</span>
    <span class="p">,</span> <span class="n">bvdHeavyDelThd</span>       <span class="o">::</span> <span class="o">!</span><span class="kt">CoinPortion</span>
    <span class="p">,</span> <span class="n">bvdUpdateVoteThd</span>     <span class="o">::</span> <span class="o">!</span><span class="kt">CoinPortion</span>
    <span class="p">,</span> <span class="n">bvdUpdateProposalThd</span> <span class="o">::</span> <span class="o">!</span><span class="kt">CoinPortion</span>
    <span class="p">,</span> <span class="n">bvdUpdateImplicit</span>    <span class="o">::</span> <span class="o">!</span><span class="kt">FlatSlotId</span>
    <span class="p">,</span> <span class="n">bvdUpdateSoftforkThd</span> <span class="o">::</span> <span class="o">!</span><span class="kt">CoinPortion</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">,</span> <span class="kt">Eq</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-3</td>
      <td>UVarInt Word16</td>
      <td>bvdScriptVersion</td>
    </tr>
    <tr>
      <td>size(Integer)</td>
      <td>Integer</td>
      <td>bvdSlotDuration</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Int32</td>
      <td>bvdMaxBlockSize</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Int32</td>
      <td>bvdMaxTxSize</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Word64</td>
      <td>bvdMpcThd</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Word64</td>
      <td>bvdHeavyDelThd</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Word64</td>
      <td>bvdUpdateVoteThd</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Word64</td>
      <td>bvdUpdateProposalThd</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Word64</td>
      <td>bvdUpdateImplicit</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Word64</td>
      <td>bvdUpdateSoftforkThd</td>
    </tr>
  </tbody>
</table>

<h3 id="update-data">Update Data</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Data which describes update. It is specific for each system.</span>
<span class="kr">data</span> <span class="kt">UpdateData</span> <span class="o">=</span> <span class="kt">UpdateData</span>
    <span class="p">{</span> <span class="n">udAppDiffHash</span>  <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">Raw</span><span class="p">)</span>
    <span class="c1">-- ^ Hash of binary diff between two applications. This diff can</span>
    <span class="c1">-- be passed to updater to create new application.</span>
    <span class="p">,</span> <span class="n">udPkgHash</span>      <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">Raw</span><span class="p">)</span>
    <span class="c1">-- ^ Hash of package to install new application. This package can</span>
    <span class="c1">-- be used to install new application from scratch instead of</span>
    <span class="c1">-- updating existing application.</span>
    <span class="p">,</span> <span class="n">udUpdaterHash</span>  <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">Raw</span><span class="p">)</span>
    <span class="c1">-- ^ Hash if update application which can be used to install this</span>
    <span class="c1">-- update (relevant only when updater is used, not package).</span>
    <span class="p">,</span> <span class="n">udMetadataHash</span> <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">Hash</span> <span class="kt">Raw</span><span class="p">)</span>
    <span class="c1">-- ^ Hash of metadata relevant to this update.  It is raw hash,</span>
    <span class="c1">-- because metadata can include image or something</span>
    <span class="c1">-- (maybe). Anyway, we can always use `unsafeHash`.</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>udAppDiffHash</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>udPkgHash</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>udUpdaterHash</td>
    </tr>
    <tr>
      <td>32</td>
      <td>Hash</td>
      <td>udMetadataHash</td>
    </tr>
  </tbody>
</table>

<h3 id="system-tag">System Tag</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="cd">-- | Tag of system for which update data is purposed, e.g. win64, mac32</span>
<span class="kr">newtype</span> <span class="kt">SystemTag</span> <span class="o">=</span> <span class="kt">SystemTag</span> <span class="p">{</span> <span class="n">getSystemTag</span> <span class="o">::</span> <span class="kt">Text</span> <span class="p">}</span>
  <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Buildable</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Lift</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">SystemTag</code> is encoded as <code class="highlighter-rouge">ByteString</code> in UTF-8 encoding.</p>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int64</td>
      <td>n</td>
      <td>Size of text in bytes</td>
    </tr>
    <tr>
      <td>n</td>
      <td>Word8[n]</td>
      <td> </td>
      <td><code class="highlighter-rouge">n</code> bytes of UTF-8 encoded text</td>
    </tr>
  </tbody>
</table>

<h3 id="update-proposal">Update Proposal</h3>

<div class="language-haskell highlighter-rouge"><pre class="highlight"><code><span class="kr">type</span> <span class="kt">UpAttributes</span> <span class="o">=</span> <span class="kt">Attributes</span> <span class="nb">()</span>

<span class="cd">-- | Proposal for software update</span>
<span class="kr">data</span> <span class="kt">UpdateProposal</span> <span class="o">=</span> <span class="kt">UpdateProposal</span>
    <span class="p">{</span> <span class="n">upBlockVersion</span>     <span class="o">::</span> <span class="o">!</span><span class="kt">BlockVersion</span>
    <span class="p">,</span> <span class="n">upBlockVersionData</span> <span class="o">::</span> <span class="o">!</span><span class="kt">BlockVersionData</span>
    <span class="p">,</span> <span class="n">upSoftwareVersion</span>  <span class="o">::</span> <span class="o">!</span><span class="kt">SoftwareVersion</span>
    <span class="p">,</span> <span class="n">upData</span>             <span class="o">::</span> <span class="o">!</span><span class="p">(</span><span class="kt">HM</span><span class="o">.</span><span class="kt">HashMap</span> <span class="kt">SystemTag</span> <span class="kt">UpdateData</span><span class="p">)</span>
    <span class="c1">-- ^ UpdateData for each system which this update affects.</span>
    <span class="c1">-- It must be non-empty.</span>
    <span class="p">,</span> <span class="n">upAttributes</span>       <span class="o">::</span> <span class="o">!</span><span class="kt">UpAttributes</span>
    <span class="c1">-- ^ Attributes which are currently empty, but provide</span>
    <span class="c1">-- extensibility.</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Show</span><span class="p">,</span> <span class="kt">Generic</span><span class="p">,</span> <span class="kt">Typeable</span><span class="p">)</span>
</code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Field size</th>
      <th>Type</th>
      <th>Value</th>
      <th>Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>5</td>
      <td>BlockVersion</td>
      <td> </td>
      <td>upBlockVersion</td>
    </tr>
    <tr>
      <td>size(BlockVersionData)</td>
      <td>BlockVersionData</td>
      <td> </td>
      <td>upBlockVersionData</td>
    </tr>
    <tr>
      <td>size(SoftwareVersion)</td>
      <td>SoftwareVersion</td>
      <td> </td>
      <td>upSoftwareVersion</td>
    </tr>
    <tr>
      <td>1-9</td>
      <td>UVarInt Int</td>
      <td>n</td>
      <td> </td>
    </tr>
    <tr>
      <td>n * (size(SystemTag) + size(UpdateData))</td>
      <td>&lt;SystemTag, UpdateData&gt;[n]</td>
      <td> </td>
      <td>upData</td>
    </tr>
    <tr>
      <td>size(Attributes ())</td>
      <td>Attributes ()</td>
      <td> </td>
      <td>upAttributes</td>
    </tr>
  </tbody>
</table>

                </div>

              </div>
              <!-- end content -->
          </div>

      </div>



    


  <div id="foot" class="foot noprint">
      <footer>


          <div class="links">
            <div class="container">

              <div class="row">
                <div class="col-md-2 col-sm-3">
                  <b>Links</b>
                  <ul>

                    <li><a href="//daedaluswallet.io/" target="_blank">Daedalus Wallet</a></li>
                    <li><a href="//whycardano.com/" target="_blank">Why&nbsp;Cardano</a></li>
                    <li><a href="//cardanoroadmap.com/" target="_blank">Cardano&nbsp;Roadmap</a></li>
                    <li><a href="//tada.iohk.io" target="_blank">Cardano ADA Faucet</a></li>
                    <li><a href="//cardano-docs.iohk.io" target="">Cardano SL Documentation</a></li>

                  </ul>

                </div>
                <div class="col-md-3 col-sm-3">
                  <b>Follow us</b>
                  <ul>
                    <li><a href="https://github.com/input-output-hk/" target="_blank">Github</a></li>
                    <li><a href="https://www.linkedin.com/company/input-output-global" target="_blank">LinkedIn</a></li>
                    <li><a href="https://twitter.com/InputOutputHK" target="_blank">Twitter</a></li>
                  </ul>


                </div>
              </div>


            </div>
          </div>


          <hr />

          <div class="container">

            <div class="footer">
                    <div class="row">
                    <div class="col-sm-12 daedalus logo">



                      <div class="uppercase">

                        <a href="//iohk.io/projects/cardano/" target="_blank" class="cardano"><img src="/img/cardano-logo.svg" width="103.5" height="30" alt="Cardano" /></a>

                        <span class="split"></span>

                        <a href="//iohk.io/projects/cardano/" target="_blank" class="support">IOHK supported project</a>
                        <a href="//iohk.io/" target="_blank" class="iohk"><img src="/img/iohk-logo.svg" alt="" width="138.4" height="30" /></a>

                      </div>



                    </div>

                  </div>
                </div>


          </div>
      </footer>
  </div>

  <script type="text/javascript" src="/js/app/app.js"></script>
  <script type="text/javascript" src="/js/app/base.1.js"></script>
  <script type="text/javascript" src="/js/app/searcher.js"></script>
  <script>

  $(".navbar-side li").each(function(){
    var txt = $(this).text().trim();
    if(txt.length == 0){
      $(this).remove();
    }
  });

  </script>


  </body>

</html>
